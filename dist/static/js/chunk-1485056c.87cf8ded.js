(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1485056c"],{"0b0e":function(t,e,a){},"2bef":function(t,e,a){"use strict";a.d(e,"g",(function(){return c})),a.d(e,"i",(function(){return s})),a.d(e,"a",(function(){return o})),a.d(e,"m",(function(){return l})),a.d(e,"f",(function(){return u})),a.d(e,"b",(function(){return d})),a.d(e,"e",(function(){return h})),a.d(e,"n",(function(){return m})),a.d(e,"c",(function(){return f})),a.d(e,"k",(function(){return p})),a.d(e,"l",(function(){return b})),a.d(e,"j",(function(){return g})),a.d(e,"o",(function(){return v})),a.d(e,"d",(function(){return y})),a.d(e,"h",(function(){return I}));var n=a("b775"),i=(a("4328"),a("bc3a")),r=a.n(i);function c(t){return Object(n["a"])({url:"/bar/get_bar_list",method:"get",params:t})}function s(t){return Object(n["a"])({url:"/user/get_upload_token",method:"get",params:t})}function o(t){var e=t,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";r.a.defaults.headers.common["jwt"]=a,r.a.post("https://api.corgi.org.cn/bar/add_bar",e).then((function(t){console.log("res=>",t)}))}function l(t){var e=t,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";r.a.defaults.headers.common["jwt"]=a,r.a.post("https://api.corgi.org.cn/bar/update_bar",e).then((function(t){console.log("res=>",t)}))}function u(t){return Object(n["a"])({url:"/bar/get_bar_activity",method:"get",params:t})}function d(t){var e=t,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";r.a.defaults.headers.common["jwt"]=a,r.a.post("https://api.corgi.org.cn/bar/add_bar_activity",e).then((function(t){console.log("res=>",t)}))}function h(t){return Object(n["a"])({url:"/bar/get_bar",method:"get",params:t})}function m(t){var e=t,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";r.a.defaults.headers.common["jwt"]=a,r.a.post("https://api.corgi.org.cn/bar/update_bar_activity",e).then((function(t){console.log("res=>",t)}))}function f(t){return Object(n["a"])({url:"/activity/delete_activity",method:"get",params:t})}function p(t){return Object(n["a"])({url:"/bar/recommend",method:"get",params:t})}function b(t){return Object(n["a"])({url:"/bar/unrecommend",method:"get",params:t})}function g(t){return Object(n["a"])({url:"/hot/list_hot_activity",method:"get",params:t})}function v(t){var e=t,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";r.a.defaults.headers.common["jwt"]=a,r.a.post("http://139.224.63.240:7888/hot/update_hot_activity",e).then((function(t){console.log("res=>",t)}))}function y(t){return Object(n["a"])({url:"/hot/delete_hot_activity",method:"get",params:t})}function I(t){return Object(n["a"])({url:"/activity/get_detail",method:"get",params:t})}},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3d55":function(t,e,a){"use strict";var n=a("0b0e"),i=a.n(n);i.a},"4c02":function(t,e,a){"use strict";var n=a("768b"),i=(a("ffc1"),a("ac6a"),a("7346"));e["a"]={mixins:[i["c"]],watch:{$route:function(){this.reload()}},mounted:function(){var t=this;this.$nextTick((function(){return t.addTabelHeightListener("parent")})),this.reload()},methods:{sortUserId:function(t,e){return t.userId-e.userId},searchData:function(){this.resetPagination()},reload:function(){var t=this,e=this.$route.params,a=e.shouldChangeForm,i=e.rewriteForm;a&&Object.entries(i).forEach((function(e){var a=Object(n["a"])(e,2),i=a[0],r=a[1];return t.$set(t.searchForm,i,r)})),this.getData()}}}},"587f":function(t,e,a){"use strict";(function(t){a("7f7f"),a("96cf");var n=a("3b8d"),i=a("2bef"),r=a("37b6"),c=a("27aa"),s=a("28b9"),o=a("69c0"),l=a("7346");e["a"]={components:{ReportStatus:c["a"],Userid:s["a"],Activityid:o["a"]},mixins:[l["d"]],props:{useData:{type:Object,default:function(){return{}}}},data:function(){return{tempImg:"",shopState:!0,allReportType:r["f"]}},methods:{getData:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(this.useData);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleAddMember:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e,a,n,r,c,s,o,l,u,d,h,m,f,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.useData.barId,a=this.useData.activityId,n=this.useData.id,r=this.useData.startTime,c=this.useData.endTime,s=this.useData.order,o=this.useData.status,l=this.useData.activityName,u="recommend",d="",t.t0=this.useData.radio,t.next="活动当地"===t.t0?13:"全国"===t.t0?20:22;break;case 13:return h=0,m=this.useData.activityId,t.next=17,Object(i["h"])({userId:h,activityId:m});case 17:return f=t.sent,d=f.data.city,t.abrupt("break",23);case 20:return d="全国",t.abrupt("break",23);case 22:throw new Error("Table Layout don't have event "+this.chartRadio+".");case 23:p={activityName:l,id:n,barId:e,activityId:a,startTime:r,endTime:c,order:s,status:o,type:u,city:d},console.log(p),Object(i["o"])(p),this.$emit("emitFunc",{function:"getData",arguments:[]}),this.handleDialogClose(),this.$emit("emitFunc",{function:"getData",arguments:[]});case 29:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),postimg:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var n,r,c,s,o,l,u,d,h,m;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["i"])({});case 2:return n=t.sent,r="oss-cn-beijing",c=n.data.accessKeyId,s=n.data.accessKeySecret,o=n.data.bucketName,l=a("9b15"),console.log(c),u=new l({region:r,accessKeyId:c,accessKeySecret:s,stsToken:n.data.securityToken,bucket:o}),console.log(u),d=Date.parse(new Date),h="".concat(d),h=Base64.encode(h),h="shop/"+h,console.log(h),t.prev=16,t.next=19,u.put(h,e);case 19:m=t.sent,console.log(m),this.tempImg=m.url,console.log(tempImg),t.next=28;break;case 25:t.prev=25,t.t0=t["catch"](16),console.log(t.t0);case 28:case"end":return t.stop()}}),t,this,[[16,25]])})));function e(e){return t.apply(this,arguments)}return e}(),uploadFile:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,r,c,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=this,n=e.target.files[0],i=n.name.lastIndexOf("."),r=n.name.substr(i),c=n.name.substr(0,i),s=Date.parse(new Date),c="".concat(c,"_").concat(s).concat(r),a.postimg(n);case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),compress:function(e,a){var n=document.createElement("canvas"),i=n.getContext("2d"),r=(e.src.length,e.width),c=e.height;n.width=r,n.height=c,i.fillStyle="#fff",i.fillRect(0,0,n.width,n.height),i.drawImage(e,0,0,r,c);var s=n.toDataURL("image/jpeg",a);console.log("*******压缩后的图片大小*******"),console.log(s.length/1024);var o=t.from(s,"base64");return console.log(o),o},handleRadioChange:function(t){this.shopState="启用"===this.chartRadio}}}}).call(this,a("b639").Buffer)},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),r=a("9e1e"),c="toString",s=/./[c],o=function(t){a("2aba")(RegExp.prototype,c,t,!0)};a("79e5")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?o((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?i.call(t):void 0)})):s.name!=c&&o((function(){return s.call(this)}))},a29e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contentMgr-avator"},[a("div",{staticClass:"flex search-bar"},[a("el-form",{staticClass:"flex-wrap filter"})],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingMap.tableLoading,expression:"loadingMap.tableLoading"}],ref:t.refMap.table,staticClass:"main-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:!0,"header-cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{label:"活动ID",align:"center",prop:"activityId"}}),t._v(" "),a("el-table-column",{attrs:{label:"商户活动名称",align:"center",prop:"activityName",formatter:t.formatColumn}}),t._v(" "),a("el-table-column",{attrs:{label:"展示区域",align:"center",prop:"area",formatter:t.formatColumn}}),t._v(" "),a("el-table-column",{attrs:{label:"投放地区",align:"center",prop:"city",formatter:t.formatColumn}}),t._v(" "),a("el-table-column",{attrs:{label:"投放开始时间",align:"center",prop:"startTime",formatter:t.formatColumn}}),t._v(" "),a("el-table-column",{attrs:{label:"投放结束时间",align:"center",prop:"endTime",formatter:t.formatColumn}}),t._v(" "),a("el-table-column",{attrs:{label:"状态",align:"center",prop:"state",formatter:t.formatColumn}}),t._v(" "),a("el-table-column",{attrs:{sortable:"",label:"顺序",align:"center",prop:"order",formatter:t.formatColumn}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"230"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.handleAddMember(e.row)}}},[t._v("编辑")]),t._v(" "),"禁用"==e.row.state?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.checkPicPass(!0,e.row)}}},[t._v("启用")]):t._e(),t._v(" "),"启用"==e.row.state?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.checkPicPass(!1,e.row)}}},[t._v("禁用")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"info",size:"mini"},on:{click:function(a){return t.checkPicRefuse(e.row)}}},[t._v("删除")])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"顺序",align:"center",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(a){return t.updateOrder(!0,e.row)}}},[t._v("向后")]),t._v(" "),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return t.updateOrder(!1,e.row)}}},[t._v("向前")])]}}])})],1),t._v(" "),a("detail",{attrs:{"use-data":t.catchedData,visible:t.visibleMap.detailDiaVisible},on:{"update:visible":function(e){return t.$set(t.visibleMap,"detailDiaVisible",e)},emitFunc:t.acceptEmitFunc}})],1)},i=[],r=(a("6b54"),a("96cf"),a("3b8d")),c=a("db72"),s=a("2bef"),o=a("aea5"),l=a("28b9"),u=a("e33a"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dialog-report"},[a("el-dialog",{attrs:{title:"更新热门",top:"8vh",visible:t.show,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(e){t.show=e}}},[a("div",{staticClass:"detail-dialog-wrap"},[a("vue-scroll",[a("el-form",{ref:"form",attrs:{model:t.useData,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"商户活动名称",prop:"reportUserName"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{name:"activityName",tabindex:"1","auto-complete":"off"},model:{value:t.useData.activityName,callback:function(e){t.$set(t.useData,"activityName",e)},expression:"useData.activityName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"投放地区",prop:"accuseName"}},[a("el-radio-group",{staticClass:"radio-group",attrs:{size:"mini"},on:{change:t.handleRadioChange},model:{value:t.useData.radio,callback:function(e){t.$set(t.useData,"radio",e)},expression:"useData.radio"}},[a("el-radio-button",{attrs:{label:"活动当地"}}),t._v(" "),a("el-radio-button",{attrs:{label:"全国"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"活动时间",prop:"accuseId"}},[t._v("\n      自：        \n  "),a("el-date-picker",{staticStyle:{width:"50%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:t.useData.startTime,callback:function(e){t.$set(t.useData,"startTime",e)},expression:"useData.startTime"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"",prop:"accuseType"}},[t._v("\n\n      \n              至：    "),a("el-date-picker",{staticStyle:{width:"50%"},attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",placeholder:"选择日期时间"},model:{value:t.useData.endTime,callback:function(e){t.$set(t.useData,"endTime",e)},expression:"useData.endTime"}})],1)],1),t._v(" "),a("el-button",{staticStyle:{width:"10%","margin-left":"50%","margin-top":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.handleAddMember()}}},[t._v("更新")])],1)],1)])],1)},h=[],m=a("587f"),f=m["a"],p=(a("3d55"),a("2877")),b=Object(p["a"])(f,d,h,!1,null,null,null),g=b.exports,v=a("4c02"),y=a("37b6"),I=a("7346"),D={searchForm:{status:""},formRules:{},censorType:"user"},w={components:{Censorshipstatus:o["a"],Detail:g,Userid:l["a"]},mixins:[u["a"],v["a"],I["a"]],data:function(){return Object(c["a"])({allCensorshipTypes:y["c"],chartRadio:"推荐页banner",visibleMap:{censorDiaVisible:!1,detailDiaVisible:!1,statusDialogVisible:!1}},D)},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(s["j"])({});case 3:e=t.sent,console.log(e),this.tableData=e.data.map((function(t){return t.state=0==t.status?"禁用":"启用","全国"==t.city?t.radio="全国":t.radio="活动当地",t.area="热门活动",t})),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}(),checkPicPass:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,r,c,o,l,u,d,h,m,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=a.id,i=a.barId,r=a.activityId,c=a.activityName,o=a.startTime,l=a.endTime,u=a.order,d="recommend",h=a.city,m=e?"1":"0",f={id:n,barId:i,activityId:r,activityName:c,startTime:o,endTime:l,order:u,status:m,type:d,city:h},Object(s["o"])(f),console.log(f),this.getData(),this.getData();case 15:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),updateOrder:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var n,i,r,c,o,l,u,d,h,m,f,p,b;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=a.id,i=a.barId,r=a.activityId,c=a.startTime,o=a.activityName,l=a.endTime,u=a.order,d=a.status,h="recommend",m=a.city,!e){t.next=16;break}f=parseInt(u),f++,u=f.toString(),t.next=21;break;case 16:if("1"!=u){t.next=18;break}return t.abrupt("return");case 18:p=parseInt(u),p--,u=p.toString();case 21:b={id:n,activityName:o,barId:i,activityId:r,startTime:c,endTime:l,order:u,status:d,type:h,city:m},console.log(b),Object(s["o"])(b),this.getData(),this.getData();case 26:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),handleRadioChange:function(t){this.getData()},handleAddMember:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.catchedData=e,this.visibleMap.detailDiaVisible=!0;case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkPicRefuse:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$msgbox.confirm("确定删除吗","提醒",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0});case 3:return a=e.id,t.next=6,Object(s["d"])({hotId:a});case 6:this.$message({type:"success",message:"操作成功"}),this.getData(),this.getData(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),"cancel"!==t.t0&&console.log(t.t0);case 14:case"end":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}()}},x=w,k=Object(p["a"])(x,n,i,!1,null,null,null);e["default"]=k.exports},e33a:function(t,e,a){"use strict";a("f6b3"),a("ac6a"),a("456d");var n=a("9abb"),i={components:{Paginationtpl:n["a"]},data:function(){return{pagination:{page:1,pageSize:10},paginationTotal:0}},watch:{pagination:{handler:function(){this.getData()},deep:!0}},methods:{resetPagination:function(){this.pagination={page:1,pageSize:10}}}};e["a"]={mixins:[i],data:function(){return{refMap:{table:"mainTable"},tableData:[],catchedDataArr:[],catchedData:{},catchedRadio:null,tableSelected:!1,tableHeight:200,extraHeight:110,loadingMap:{tableLoading:!1},visibleMap:{tableVisible:!1},renderMap:{tableRender:!1},switchMap:{getDataOnRender:!0}}},computed:{isTableRadioSelected:function(){return Object.keys(this.catchedData).length},isTableCheckBoxSelected:function(){return this.catchedDataArr.length>0}},mounted:function(){Reflect.has(this,"getData")&&this.switchMap.getDataOnRender&&this.getData()},watch:{"loadingMap.tableLoading":function(t){var e=this;t||this.$nextTick((function(){var t=e.$refs[e.refMap.table];t&&t.doLayout()}))}},methods:{handleTableCheckBoxSelect:function(t){this.catchedDataArr=t,this.tableSelected=this.$refs[this.refMap.table].selection.length>0},handleTabelRadioClick:function(t){this.catchedRadio=t,this.catchedData=this.tableData[t]},handleTableItemClick:function(t){this.catchedData=t},setTableHeightBySelf:function(){var t=this.minTableHeight,e=void 0===t?0:t,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,i=this.$el.clientHeight-this.extraHeight-n;this.tableHeight=i<e?e:i},setTableHeightByParent:function(){var t=this.minTableHeight,e=void 0===t?0:t,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,i=this.$parent.$el.clientHeight-this.extraHeight-n;this.tableHeight=i<e?e:i},watchResizeFinish:function(t,e){var a=this;return clearTimeout(e),e=setTimeout((function(){return new Promise((function(e){a.renderMap.tableRender=!0,e(t()),a.$nextTick((function(){setTimeout((function(){a.renderMap.tableRender=!1}),100)}))}))}),100),e},addTabelHeightListener:function(){var t,e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self",n="self"===a?this.$el:this.$parent.$el,i="self"===a?this.setTableHeightBySelf:this.setTableHeightByParent;this.$erd.listenTo(n,(function(a){e.renderMap.tableRender||(t=e.watchResizeFinish(i,t))}))},isTableSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"请先选择需要修改的数据";return!(!this.isTableRadioSelected&&!this.isTableCheckBoxSelected)||(this.$message({type:"warning",message:t}),!1)},formatColumn:function(t,e,a,n){return null===a||""===a||void 0===a?"--":a}},beforeDestroy:function(){this.$erd.removeAllListeners(this.$el)}}}}]);