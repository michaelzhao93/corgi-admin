(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b17214e2"],{"2bef":function(e,t,a){"use strict";a.d(t,"g",(function(){return c})),a.d(t,"i",(function(){return s})),a.d(t,"a",(function(){return o})),a.d(t,"m",(function(){return u})),a.d(t,"f",(function(){return l})),a.d(t,"b",(function(){return h})),a.d(t,"e",(function(){return d})),a.d(t,"n",(function(){return f})),a.d(t,"c",(function(){return p})),a.d(t,"k",(function(){return b})),a.d(t,"l",(function(){return m})),a.d(t,"j",(function(){return g})),a.d(t,"o",(function(){return v})),a.d(t,"d",(function(){return I})),a.d(t,"h",(function(){return w}));var n=a("b775"),r=(a("4328"),a("bc3a")),i=a.n(r);function c(e){return Object(n["a"])({url:"/bar/get_bar_list",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/user/get_upload_token",method:"get",params:e})}function o(e){var t=e,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";i.a.defaults.headers.common["jwt"]=a,i.a.post("https://api.corgi.org.cn/bar/add_bar",t).then((function(e){console.log("res=>",e)}))}function u(e){var t=e,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";i.a.defaults.headers.common["jwt"]=a,i.a.post("https://api.corgi.org.cn/bar/update_bar",t).then((function(e){console.log("res=>",e)}))}function l(e){return Object(n["a"])({url:"/bar/get_bar_activity",method:"get",params:e})}function h(e){var t=e,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";i.a.defaults.headers.common["jwt"]=a,i.a.post("https://api.corgi.org.cn/bar/add_bar_activity",t).then((function(e){console.log("res=>",e)}))}function d(e){return Object(n["a"])({url:"/bar/get_bar",method:"get",params:e})}function f(e){var t=e,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";i.a.defaults.headers.common["jwt"]=a,i.a.post("https://api.corgi.org.cn/bar/update_bar_activity",t).then((function(e){console.log("res=>",e)}))}function p(e){return Object(n["a"])({url:"/activity/delete_activity",method:"get",params:e})}function b(e){return Object(n["a"])({url:"/bar/recommend",method:"get",params:e})}function m(e){return Object(n["a"])({url:"/bar/unrecommend",method:"get",params:e})}function g(e){return Object(n["a"])({url:"/hot/list_hot_activity",method:"get",params:e})}function v(e){var t=e,a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3MzU0MjUwNDgsInVzZXJJZCI6Ii0xIiwidmVyc2lvbiI6IlYxLjAiLCJpYXQiOjE1ODgzMDIxNTV9.UcR_5JX0hIPBzySF9q4vh4oI8DyY7pXmHTzQqffiKkM";i.a.defaults.headers.common["jwt"]=a,i.a.post("http://139.224.63.240:7888/hot/update_hot_activity",t).then((function(e){console.log("res=>",e)}))}function I(e){return Object(n["a"])({url:"/hot/delete_hot_activity",method:"get",params:e})}function w(e){return Object(n["a"])({url:"/activity/get_detail",method:"get",params:e})}},"370b":function(e,t,a){"use strict";(function(e){a("7f7f"),a("96cf");var n=a("3b8d"),r=a("2bef"),i=a("37b6"),c=a("27aa"),s=a("28b9"),o=a("69c0"),u=a("d044"),l=a.n(u),h=a("7346");t["a"]={components:{ReportStatus:c["a"],Userid:s["a"],Activityid:o["a"]},mixins:[h["d"]],props:{useData:{type:Object,default:function(){return{}}}},data:function(){return{bname:"",chartRadio:"启用",shopState:!0,allReportType:i["f"]}},methods:{getData:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(this.useData);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddMember:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs.qrcode.innerHTML="",new l.a("qrcode",{width:200,height:200,text:"https://www.corgi.org.cn/countDownload?user="+this.bname});case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),postimg:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var n,i,c,s,o,u,l,h,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r["i"])({});case 2:return n=e.sent,i="oss-cn-beijing",c=n.data.accessKeyId,s=n.data.accessKeySecret,o=n.data.bucketName,u=a("9b15"),console.log(c),l=new u({region:i,accessKeyId:c,accessKeySecret:s,stsToken:n.data.securityToken,bucket:o}),console.log(l),h=Date.parse(new Date),d="".concat(h),d=Base64.encode(d),d="shop/"+d,console.log(d),e.prev=16,e.next=19,l.put(d,t);case 19:f=e.sent,console.log(f),this.tempImg=f.url,console.log(tempImg),e.next=28;break;case 25:e.prev=25,e.t0=e["catch"](16),console.log(e.t0);case 28:case"end":return e.stop()}}),e,this,[[16,25]])})));function t(t){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,r,i,c,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this,n=t.target.files[0],r=n.name.lastIndexOf("."),i=n.name.substr(r),c=n.name.substr(0,r),s=Date.parse(new Date),c="".concat(c,"_").concat(s).concat(i),a.postimg(n);case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),compress:function(t,a){var n=document.createElement("canvas"),r=n.getContext("2d"),i=(t.src.length,t.width),c=t.height;n.width=i,n.height=c,r.fillStyle="#fff",r.fillRect(0,0,n.width,n.height),r.drawImage(t,0,0,i,c);var s=n.toDataURL("image/jpeg",a);console.log("*******压缩后的图片大小*******"),console.log(s.length/1024);var o=e.from(s,"base64");return console.log(o),o},handleRadioChange:function(e){this.shopState="启用"===this.chartRadio}}}}).call(this,a("b639").Buffer)},"63f1":function(e,t,a){},"97fe":function(e,t,a){"use strict";var n=a("63f1"),r=a.n(n);r.a},"9f2d":function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"e",(function(){return i})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return s})),a.d(t,"d",(function(){return o}));var n=a("b775");function r(e){return Object(n["a"])({url:"/tool/get_statistics",method:"get",params:e})}function i(e){return Object(n["a"])({url:"/tool/sum_statistics",method:"get",params:e})}function c(e){return Object(n["a"])({url:"/tool/get_user_stay",method:"get",params:e})}function s(e){return Object(n["a"])({url:"/tool/get_user_trace",method:"get",params:e})}function o(e){return Object(n["a"])({url:"/tool/get_influencer",method:"get",params:e})}},db0c:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"contentMgr-avator"},[a("div",{staticClass:"flex search-bar"},[a("el-form",{staticClass:"flex-wrap filter"},[a("div",{staticClass:"flex search-bar"},[a("div",{staticClass:"search-btnGroup flex"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleAddMember({})}}},[e._v("生成二维码")])],1)])])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingMap.tableLoading,expression:"loadingMap.tableLoading"}],ref:e.refMap.table,staticClass:"main-table",staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,"header-cell-style":{textAlign:"center"}}},[a("el-table-column",{attrs:{sortable:"",label:"活动名称/用户名",align:"center",prop:"user"}}),e._v(" "),a("el-table-column",{attrs:{label:"扫描次数",align:"center",prop:"count",formatter:e.formatColumn}})],1),e._v(" "),a("detail",{attrs:{"use-data":e.catchedData,visible:e.visibleMap.detailDiaVisible},on:{"update:visible":function(t){return e.$set(e.visibleMap,"detailDiaVisible",t)},emitFunc:e.acceptEmitFunc}})],1)},r=[],i=(a("96cf"),a("3b8d")),c=a("db72"),s=a("9f2d"),o=a("aea5"),u=a("28b9"),l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-report"},[a("el-dialog",{attrs:{title:"生成二维码",top:"8vh",visible:e.show,width:"600px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[a("div",{staticClass:"detail-dialog-wrap"},[a("vue-scroll",[a("el-form",{ref:"form",attrs:{model:e.useData,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"用户名/活动名",prop:"id"}},[a("el-input",{staticStyle:{width:"50%"},attrs:{name:"bname",tabindex:"1","auto-complete":"off"},model:{value:e.bname,callback:function(t){e.bname=t},expression:"bname"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"reportUserId"}},[a("div",{ref:"qrcode",attrs:{id:"qrcode"}}),e._v(" "),a("img",{directives:[{name:"",rawName:"v-"}],attrs:{src:e.useData.logo,alt:""}})])],1),e._v(" "),a("el-button",{staticStyle:{width:"10%","margin-left":"50%","margin-top":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleAddMember()}}},[e._v("生成")])],1)],1)])],1)},h=[],d=a("370b"),f=d["a"],p=(a("97fe"),a("2877")),b=Object(p["a"])(f,l,h,!1,null,null,null),m=b.exports,g=a("e33a"),v=a("768b"),I=(a("ffc1"),a("ac6a"),a("7346")),w={mixins:[I["c"]],watch:{$route:function(){this.reload()}},mounted:function(){var e=this;this.$nextTick((function(){return e.addTabelHeightListener("parent")})),this.reload()},methods:{sortUserId:function(e,t){return e.userId-t.userId},searchData:function(){this.resetPagination()},reload:function(){var e=this,t=this.$route.params,a=t.shouldChangeForm,n=t.rewriteForm;a&&Object.entries(n).forEach((function(t){var a=Object(v["a"])(t,2),n=a[0],r=a[1];return e.$set(e.searchForm,n,r)})),this.getData()}}},y=a("37b6"),x={searchForm:{status:""},formRules:{},censorType:"user"},D={components:{Censorshipstatus:o["a"],Detail:m,Userid:u["a"]},mixins:[g["a"],w,I["a"]],data:function(){return Object(c["a"])({allCensorshipTypes:y["c"],visibleMap:{censorDiaVisible:!1,detailDiaVisible:!1,statusDialogVisible:!1}},x)},methods:{getData:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["d"])({});case 3:t=e.sent,console.log(t),this.tableData=t.data,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),checkPicPass:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a=t.row.dataId,n=this.censorType,r=-1,e.next=6,passPic({dataId:a,type:n,userId:r});case 6:this.$message({type:"success",message:"操作成功"}),this.getData(),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}(),handleAddMember:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.catchedData=t,this.visibleMap.detailDiaVisible=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkPicRefuse:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$msgbox.confirm("确定不通过该图片","提醒",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning",dangerouslyUseHTMLString:!0});case 3:return a=t.row.dataId,n=this.censorType,r=-1,e.next=8,refusePic({dataId:a,type:n,userId:r});case 8:this.$message({type:"success",message:"操作成功"}),this.getData(),e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),"cancel"!==e.t0&&console.log(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));function t(t){return e.apply(this,arguments)}return t}()}},j=D,O=Object(p["a"])(j,n,r,!1,null,null,null);t["default"]=O.exports},e33a:function(e,t,a){"use strict";a("f6b3"),a("ac6a"),a("456d");var n=a("9abb"),r={components:{Paginationtpl:n["a"]},data:function(){return{pagination:{page:1,pageSize:10},paginationTotal:0}},watch:{pagination:{handler:function(){this.getData()},deep:!0}},methods:{resetPagination:function(){this.pagination={page:1,pageSize:10}}}};t["a"]={mixins:[r],data:function(){return{refMap:{table:"mainTable"},tableData:[],catchedDataArr:[],catchedData:{},catchedRadio:null,tableSelected:!1,tableHeight:200,extraHeight:110,loadingMap:{tableLoading:!1},visibleMap:{tableVisible:!1},renderMap:{tableRender:!1},switchMap:{getDataOnRender:!0}}},computed:{isTableRadioSelected:function(){return Object.keys(this.catchedData).length},isTableCheckBoxSelected:function(){return this.catchedDataArr.length>0}},mounted:function(){Reflect.has(this,"getData")&&this.switchMap.getDataOnRender&&this.getData()},watch:{"loadingMap.tableLoading":function(e){var t=this;e||this.$nextTick((function(){var e=t.$refs[t.refMap.table];e&&e.doLayout()}))}},methods:{handleTableCheckBoxSelect:function(e){this.catchedDataArr=e,this.tableSelected=this.$refs[this.refMap.table].selection.length>0},handleTabelRadioClick:function(e){this.catchedRadio=e,this.catchedData=this.tableData[e]},handleTableItemClick:function(e){this.catchedData=e},setTableHeightBySelf:function(){var e=this.minTableHeight,t=void 0===e?0:e,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,r=this.$el.clientHeight-this.extraHeight-n;this.tableHeight=r<t?t:r},setTableHeightByParent:function(){var e=this.minTableHeight,t=void 0===e?0:e,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,r=this.$parent.$el.clientHeight-this.extraHeight-n;this.tableHeight=r<t?t:r},watchResizeFinish:function(e,t){var a=this;return clearTimeout(t),t=setTimeout((function(){return new Promise((function(t){a.renderMap.tableRender=!0,t(e()),a.$nextTick((function(){setTimeout((function(){a.renderMap.tableRender=!1}),100)}))}))}),100),t},addTabelHeightListener:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"self",n="self"===a?this.$el:this.$parent.$el,r="self"===a?this.setTableHeightBySelf:this.setTableHeightByParent;this.$erd.listenTo(n,(function(a){t.renderMap.tableRender||(e=t.watchResizeFinish(r,e))}))},isTableSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"请先选择需要修改的数据";return!(!this.isTableRadioSelected&&!this.isTableCheckBoxSelected)||(this.$message({type:"warning",message:e}),!1)},formatColumn:function(e,t,a,n){return null===a||""===a||void 0===a?"--":a}},beforeDestroy:function(){this.$erd.removeAllListeners(this.$el)}}}}]);