{"remainingRequest":"/Users/zhaoguanglin/corgi-admin/node_modules/thread-loader/dist/cjs.js!/Users/zhaoguanglin/corgi-admin/node_modules/babel-loader/lib/index.js!/Users/zhaoguanglin/corgi-admin/src/mixins/tableCommon.js","dependencies":[{"path":"/Users/zhaoguanglin/corgi-admin/src/mixins/tableCommon.js","mtime":1589960934000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.reflect.has\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport pagination from \"./pagination\";\nexport default {\n  mixins: [pagination],\n  data: function data() {\n    return {\n      refMap: {\n        table: 'mainTable'\n      },\n      tableData: [],\n      catchedDataArr: [],\n      catchedData: {},\n      catchedRadio: null,\n      tableSelected: false,\n      tableHeight: 200,\n      extraHeight: 110,\n      loadingMap: {\n        tableLoading: false\n      },\n      visibleMap: {\n        tableVisible: false\n      },\n      renderMap: {\n        tableRender: false\n      },\n      switchMap: {\n        getDataOnRender: true\n      }\n    };\n  },\n  computed: {\n    isTableRadioSelected: function isTableRadioSelected() {\n      return Object.keys(this.catchedData).length;\n    },\n    isTableCheckBoxSelected: function isTableCheckBoxSelected() {\n      return this.catchedDataArr.length > 0;\n    }\n  },\n  mounted: function mounted() {\n    if (Reflect.has(this, 'getData') && this.switchMap.getDataOnRender) {\n      this.getData();\n    }\n  },\n  watch: {\n    'loadingMap.tableLoading': function loadingMapTableLoading(value) {\n      var _this = this;\n\n      if (!value) {\n        this.$nextTick(function () {\n          var ref = _this.$refs[_this.refMap.table];\n          ref && ref.doLayout();\n        });\n      }\n    }\n  },\n  methods: {\n    handleTableCheckBoxSelect: function handleTableCheckBoxSelect(catchedDataArr) {\n      this.catchedDataArr = catchedDataArr;\n      this.tableSelected = this.$refs[this.refMap.table].selection.length > 0;\n    },\n    handleTabelRadioClick: function handleTabelRadioClick(index) {\n      this.catchedRadio = index;\n      this.catchedData = this.tableData[index];\n    },\n    handleTableItemClick: function handleTableItemClick(catchedData) {\n      this.catchedData = catchedData;\n    },\n    setTableHeightBySelf: function setTableHeightBySelf() {\n      // 以自身容器高度设置table高度\n      var _this$minTableHeight = this.minTableHeight,\n          minTableHeight = _this$minTableHeight === void 0 ? 0 : _this$minTableHeight;\n      var searchBar = this.$refs[this.searchRef];\n      var searchBarHei = searchBar && searchBar.$el.clientHeight || 0;\n      var newHeight = this.$el.clientHeight - this.extraHeight - searchBarHei;\n      this.tableHeight = newHeight < minTableHeight ? minTableHeight : newHeight;\n    },\n    setTableHeightByParent: function setTableHeightByParent() {\n      // 以父级容器高度设置table高度\n      var _this$minTableHeight2 = this.minTableHeight,\n          minTableHeight = _this$minTableHeight2 === void 0 ? 0 : _this$minTableHeight2;\n      var searchBar = this.$refs[this.searchRef];\n      var searchBarHei = searchBar && searchBar.$el.clientHeight || 0;\n      var newHeight = this.$parent.$el.clientHeight - this.extraHeight - searchBarHei;\n      this.tableHeight = newHeight < minTableHeight ? minTableHeight : newHeight;\n    },\n    watchResizeFinish: function watchResizeFinish(fn, timer) {\n      var _this2 = this;\n\n      clearTimeout(timer);\n      timer = setTimeout(function () {\n        return new Promise(function (resolve) {\n          _this2.renderMap.tableRender = true;\n          resolve(fn());\n\n          _this2.$nextTick(function () {\n            setTimeout(function () {\n              _this2.renderMap.tableRender = false;\n            }, 100);\n          });\n        });\n      }, 100);\n      return timer;\n    },\n    addTabelHeightListener: function addTabelHeightListener() {\n      var _this3 = this;\n\n      var isSelf = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'self';\n      var useEl = isSelf === 'self' ? this.$el : this.$parent.$el;\n      var useFunction = isSelf === 'self' ? this.setTableHeightBySelf : this.setTableHeightByParent;\n      var timer;\n      this.$erd.listenTo(useEl, function (element) {\n        if (!_this3.renderMap.tableRender) {\n          timer = _this3.watchResizeFinish(useFunction, timer);\n        }\n      });\n    },\n    isTableSelected: function isTableSelected() {\n      var message = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '请先选择需要修改的数据';\n\n      // 成立条件：istableRadioSlected ==  true || this.isTableCheckBoxSelected == true\n      // 失败：提示message 并反馈false\n      if (this.isTableRadioSelected || this.isTableCheckBoxSelected) {\n        return true;\n      } else {\n        this.$message({\n          type: 'warning',\n          message: message\n        });\n        return false;\n      }\n    },\n    formatColumn: function formatColumn(row, cell, value, index) {\n      // 单元格为空值，默认显示'--'\n      return value === null || value === '' || value === void 0 ? '--' : value;\n    }\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$erd.removeAllListeners(this.$el);\n  }\n};",null]}