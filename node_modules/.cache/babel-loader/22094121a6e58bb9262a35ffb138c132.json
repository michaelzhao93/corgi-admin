{"remainingRequest":"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/thread-loader/dist/cjs.js!/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/babel-loader/lib/index.js!/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoguanglin/Documents/corgi/corgi-admin/src/views/matchMgr/nature/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhaoguanglin/Documents/corgi/corgi-admin/src/views/matchMgr/nature/index.vue","mtime":1589873344109},{"path":"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.regexp.match\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.array.fill\";\nimport _slicedToArray from \"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es7.object.entries\";\nimport _objectSpread from \"/Users/zhaoguanglin/Documents/corgi/corgi-admin/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread2\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport tableCommon from '@/mixins/tableCommon';\nimport { searchCommon } from '@/mixins/commonSet';\nimport { getStatistics, getUserStay } from '@/api/dataCenter';\nimport { pickerOptions, keepColumnStyle } from '@/utils/const';\nimport { get_match_factor, update_match_factor, refresh_all_match } from '@/api/matchMgr';\nimport pageConfig from \"./pageConfig\";\nexport default {\n  mixins: [tableCommon, searchCommon],\n  data: function data() {\n    return _objectSpread(_objectSpread({}, pageConfig), {}, {\n      pickerOptions: pickerOptions,\n      extraHeight: 0,\n      keepColumn: [{\n        label: 'ESTJ',\n        keepDay: 'ESTJ'\n      }, {\n        label: 'ESTP',\n        keepDay: 'ESTP'\n      }, {\n        label: 'ESFJ',\n        keepDay: 'ESFJ'\n      }, {\n        label: 'ESFP',\n        keepDay: 'ESFP'\n      }, {\n        label: 'ENTJ',\n        keepDay: 'ENTJ'\n      }, {\n        label: 'ENTP',\n        keepDay: 'ENTP'\n      }, {\n        label: 'ENFJ',\n        keepDay: 'ENFJ'\n      }, {\n        label: 'ENFP',\n        keepDay: 'ENFP'\n      }, {\n        label: 'ISTJ',\n        keepDay: 'ISTJ'\n      }, {\n        label: 'ISTP',\n        keepDay: 'ISTP'\n      }, {\n        label: 'ISFJ',\n        keepDay: 'ISFJ'\n      }, {\n        label: 'ISFP',\n        keepDay: 'ISFP'\n      }, {\n        label: 'INTJ',\n        keepDay: 'INTJ'\n      }, {\n        label: 'INTP',\n        keepDay: 'INTP'\n      }, {\n        label: 'INFJ',\n        keepDay: 'INFJ'\n      }, {\n        label: 'INFP',\n        keepDay: 'INFP'\n      }],\n      loadingMap: {\n        tableLoading: false\n      }\n    });\n  },\n  beforeMount: function beforeMount() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      _this.addTabelHeightListener('parent');\n\n      _this.getPageData();\n    });\n  },\n  methods: {\n    generateData: function generateData(params) {\n      var _this2 = this;\n\n      console.log(params);\n\n      var _Object$entries$reduc = Object.entries(params).reduce(function (data, _ref) {\n        var _ref2 = _slicedToArray(_ref, 2),\n            key = _ref2[0],\n            value = _ref2[1];\n\n        data[key] = key === 'stayCount' ? value : _this2.$day(value);\n        return data;\n      }, {}),\n          startDate = _Object$entries$reduc.startDate,\n          endDate = _Object$entries$reduc.endDate,\n          stayCount = _Object$entries$reduc.stayCount;\n\n      var diff = Math.abs(startDate.diff(endDate, 'day'));\n      return Array(diff).fill('').map(function (item, index) {\n        var loginDate = startDate.add(index, 'day');\n        var count = Math.floor(Math.random() * 1000);\n        return Array(Number(stayCount) + 1).fill('').map(function (keep, keepIndex) {\n          count = parseInt(count * (1 - Math.floor(Math.random() * 30) / 100));\n          return {\n            loginDate: loginDate.format('YYYY-MM-DD'),\n            stayDate: loginDate.add(keepIndex, 'day').format('YYYY-MM-DD'),\n            stayCount: keepIndex,\n            count: count\n          };\n        });\n      }).flat(Infinity);\n    },\n    UpdateData: function UpdateData() {\n      console.log(\"update\");\n      refresh_all_match();\n      this.$message({\n        type: 'success',\n        message: '更新成功'\n      });\n    },\n    tableDbEdit: function tableDbEdit(row, column, cell, event) {\n      console.log(row, column, cell, event);\n\n      if (column.label != \"性格\") {\n        event.target.innerHTML = \"\";\n        var cellInput = document.createElement(\"input\");\n        cellInput.value = \"\";\n        cellInput.setAttribute(\"type\", \"number\");\n        cellInput.style.width = \"70%\";\n        cell.appendChild(cellInput);\n\n        cellInput.onblur = function () {\n          cell.removeChild(cellInput);\n          event.target.innerHTML = cellInput.value;\n          var ctr1 = \"\";\n          var ctr2 = \"\";\n          var temp = {};\n          temp.cn1 = \"ctr1\";\n          temp.cv1 = row.role;\n          temp.cn2 = \"ctr2\";\n          temp.cv2 = column.label;\n          temp.match = cellInput.value;\n          temp.table = \"character\";\n          console.log(temp);\n          var res = update_match_factor(temp);\n        };\n      }\n    },\n    getPageData: function () {\n      var _getPageData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var table, keepData, temp, common_table_info, a, i;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                this.loadingMap.tableLoading = true;\n                table = 'character';\n                _context.next = 5;\n                return get_match_factor({\n                  table: table\n                });\n\n              case 5:\n                keepData = _context.sent;\n                temp = {};\n                console.log(keepData);\n                temp.a = \"ESTJ\";\n                temp.b = \"ESTP\";\n                temp.c = \"ESFJ\";\n                temp.d = \"ESFP\";\n                temp.e = \"ENTJ\";\n                temp.f = \"ENTP\";\n                temp.g = \"ENFJ\";\n                temp.h = \"ENFP\";\n                temp.i = \"ISTJ\";\n                temp.j = \"ISTP\";\n                temp.k = \"ISFJ\";\n                temp.l = \"ISFP\";\n                temp.m = \"INTJ\";\n                temp.n = \"INTP\";\n                temp.o = \"INFJ\";\n                temp.p = \"INFP\";\n                common_table_info = [];\n                a = 0;\n\n                for (i in temp) {\n                  common_table_info.push({\n                    role: temp[i],\n                    ESTJ: keepData.data[0 + 16 * a].match,\n                    ESTP: keepData.data[1 + 16 * a].match,\n                    ESFJ: keepData.data[2 + 16 * a].match,\n                    ESFP: keepData.data[3 + 16 * a].match,\n                    ENTJ: keepData.data[4 + 16 * a].match,\n                    ENTP: keepData.data[5 + 16 * a].match,\n                    ENFJ: keepData.data[6 + 16 * a].match,\n                    ENFP: keepData.data[7 + 16 * a].match,\n                    ISTJ: keepData.data[8 + 16 * a].match,\n                    ISTP: keepData.data[9 + 16 * a].match,\n                    ISFJ: keepData.data[10 + 16 * a].match,\n                    ISFP: keepData.data[11 + 16 * a].match,\n                    INTJ: keepData.data[12 + 16 * a].match,\n                    INTP: keepData.data[13 + 16 * a].match,\n                    INFJ: keepData.data[14 + 16 * a].match,\n                    INFP: keepData.data[15 + 16 * a].match\n                  });\n                  a++;\n                } // for(let i in temp)\n                // {\n                //   common_table_info.push({role:temp[i],a1:keepData.data[0+(16*a)].match,a7:keepData.data[1+(16*a)].match,a5:keepData.data[2+(16*a)].match,a3:keepData.data[3+(16*a)].match,a0:keepData.data[4+(16*a)].match});\n                //   a++;\n                // }\n\n\n                console.log(common_table_info);\n                this.tableData = common_table_info;\n                _context.next = 35;\n                break;\n\n              case 31:\n                _context.prev = 31;\n                _context.t0 = _context[\"catch\"](0);\n                console.log(_context.t0);\n                this.tableData = [];\n\n              case 35:\n                _context.prev = 35;\n                this.loadingMap.tableLoading = false;\n                return _context.finish(35);\n\n              case 38:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[0, 31, 35, 38]]);\n      }));\n\n      function getPageData() {\n        return _getPageData.apply(this, arguments);\n      }\n\n      return getPageData;\n    }(),\n    getColumnStyle: function getColumnStyle(_ref3) {\n      var row = _ref3.row,\n          column = _ref3.column,\n          rowIndex = _ref3.rowIndex,\n          columnIndex = _ref3.columnIndex;\n      var value = row[column.property];\n\n      if (typeof value === 'number' && row.base !== 0) {\n        var persent = (value / row.base * 100).toFixed(1);\n        var check = keepColumnStyle.find(function (item) {\n          return persent >= item.min && persent <= item.max;\n        });\n        return check && {\n          backgroundColor: check.background,\n          color: check.color || '#000'\n        };\n      }\n    }\n  }\n};",null]}