{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-08cc1238\"],{\"1b82\":function(t,e,a){},2932:function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"specify-role chart-simple\"},[a(\"div\",{staticClass:\"chart\"},[a(\"div\",{staticClass:\"chart-filter flex-wrap\"},[a(\"div\",{staticClass:\"time-range-wrap flex\"},[a(\"date-range-picker\",{attrs:{\"time-range\":t.baseTime,\"default-today\":!0},on:{\"update:timeRange\":function(e){t.baseTime=e},\"update:time-range\":function(e){t.baseTime=e}}}),t._v(\" \"),a(\"el-button\",{staticClass:\"getChartData\",attrs:{type:\"primary\",size:\"small\"},on:{click:t.handleRadioChange}},[t._v(\"搜索\")])],1)]),t._v(\" \"),a(\"div\",{staticClass:\"page-desc\"},[t._v(t._s(t.$route.meta.title)+\"：每日推荐榜单管理。\")])]),t._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loadingMap.tableLoading,expression:\"loadingMap.tableLoading\"}],ref:t.refMap.table,staticClass:\"main-table\",staticStyle:{width:\"100%\"},attrs:{data:t.tableData,border:!0,\"header-cell-style\":{textAlign:\"center\"}}},[a(\"el-table-column\",{attrs:{sortable:\"\",label:\"ID\",align:\"center\",prop:\"userId\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{label:\"昵称\",align:\"center\",prop:\"nickname\",formatter:t.formatColumn}}),t._v(\" \"),a(\"el-table-column\",{attrs:{width:\"120\",height:\"100\",label:\"头像\",align:\"center\",prop:\"avatar\"},scopedSlots:t._u([{key:\"default\",fn:function(t){return[a(\"img\",{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:t.row.avatar,expression:\"scope.row.avatar\"}],staticClass:\"avator-img\",attrs:{width:\"80\",height:\"80\"}})]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{label:\"日期\",align:\"center\",prop:\"date\",formatter:t.formatColumn}}),t._v(\" \"),a(\"el-table-column\",{attrs:{label:\"上榜次数\",align:\"center\",prop:\"count\",formatter:t.formatColumn}}),t._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"130\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-button\",{attrs:{type:\"success\",size:\"mini\"},on:{click:function(a){return t.handleAddMember(e.row)}}},[t._v(\"替换\")])]}}])})],1),t._v(\" \"),a(\"detail\",{attrs:{\"use-data\":t.catchedData,visible:t.visibleMap.detailDiaVisible},on:{\"update:visible\":function(e){return t.$set(t.visibleMap,\"detailDiaVisible\",e)},emitFunc:t.acceptEmitFunc}})],1)},r=[],i=(a(\"6b54\"),a(\"768b\")),s=(a(\"96cf\"),a(\"3b8d\")),c=a(\"db72\"),o=a(\"13e7\"),l=a(\"aea5\"),u=a(\"28b9\"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"dialog-report\"},[a(\"el-dialog\",{attrs:{title:\"替换榜单人员\",top:\"8vh\",visible:t.show,width:\"600px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.show=e}}},[a(\"div\",{staticClass:\"detail-dialog-wrap\"},[a(\"vue-scroll\",[a(\"el-form\",{ref:\"form\",attrs:{model:t.useData,\"label-width\":\"140px\"}},[a(\"el-form-item\",{attrs:{label:\"日期\",prop:\"id\"}},[a(\"el-input\",{staticStyle:{width:\"57%\"},attrs:{name:\"title\",tabindex:\"1\",\"auto-complete\":\"off\"},model:{value:t.useData.date,callback:function(e){t.$set(t.useData,\"date\",e)},expression:\"useData.date\"}})],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"将\",prop:\"id\"}},[a(\"el-input\",{staticStyle:{width:\"57%\"},attrs:{name:\"title\",tabindex:\"1\",\"auto-complete\":\"off\"},model:{value:t.useData.nickname,callback:function(e){t.$set(t.useData,\"nickname\",e)},expression:\"useData.nickname\"}})],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"替换为\",prop:\"id\"}},[a(\"el-input\",{staticStyle:{width:\"57%\"},attrs:{name:\"title\",tabindex:\"1\",\"auto-complete\":\"off\"},model:{value:t.useData.nicknamenew,callback:function(e){t.$set(t.useData,\"nicknamenew\",e)},expression:\"useData.nicknamenew\"}})],1)],1),t._v(\" \"),a(\"el-button\",{staticStyle:{width:\"10%\",\"margin-left\":\"50%\",\"margin-top\":\"20px\"},attrs:{type:\"primary\",size:\"small\"},on:{click:function(e){return t.handleAddMember()}}},[t._v(\"确认\")])],1)],1)])],1)},d=[],p=a(\"4a44\"),f=p[\"a\"],m=(a(\"62b1\"),a(\"2877\")),g=Object(m[\"a\"])(f,h,d,!1,null,null,null),b=g.exports,v=a(\"e33a\"),w=a(\"35a9\"),y=a(\"37b6\"),D=a(\"7346\"),x={searchForm:{status:\"\"},formRules:{},censorType:\"user\"},k=(a(\"55dd\"),a(\"29ac\"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"el-date-picker\",{attrs:{type:t.type,align:\"right\",\"unlink-panels\":\"\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"picker-options\":t.pickerOptions,size:\"small\"},model:{value:t.pickTimeRange,callback:function(e){t.pickTimeRange=e},expression:\"pickTimeRange\"}})}),R=[],T={props:{type:{type:String,default:\"daterange\"},timeRange:{type:Array,default:function(){return[]}},defaultToday:{type:Boolean,default:!1}},data:function(){return{pickerOptions:y[\"l\"],pickTimeRange:[]}},watch:{pickTimeRange:function(t){this.$emit(\"update:timeRange\",t)}},created:function(){if(this.defaultToday){var t=this.$day(new Date).subtract(1,\"day\").toDate();this.pickTimeRange=[t,t]}else{var e=new Date;this.pickTimeRange=[this.$day(e).subtract(30,\"day\").toDate(),e]}}},O=T,$=Object(m[\"a\"])(O,k,R,!1,null,null,null),j=$.exports,C=a(\"9f2d\"),_=a(\"2817\"),S={mixins:[v[\"a\"],D[\"a\"]],components:{Chart:_[\"a\"],dateRangePicker:j},data:function(){var t=this.$day(new Date).subtract(1,\"day\").toDate();return{seriesItemColor:y[\"m\"],baseTime:[t,t],useProp:[],chartData:{},tableHeight:400,tableHead:\"\",loadingMap:{chartLoading:!1},xAxisTpl:{type:\"category\",data:[]},chartTitle:this.$route.meta.title,seriesTpl:{name:\"\",type:\"line\",smooth:!0,data:[]},chartOption:{option:{title:{text:\"\",top:\"3%\",left:\"center\"},tooltip:{trigger:\"axis\",axisPointer:{type:\"shadow\"}},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:[\"line\",\"bar\"]},restore:{show:!0},saveAsImage:{show:!0}}},dataZoom:[{show:!0,start:0,end:100,xAxisIndex:[0]},{type:\"inside\",start:0,end:100},{show:!0,yAxisIndex:0,filterMode:\"filter\",width:30,height:\"65%\",showDataShadow:!1,left:\"93%\",top:\"100\",bottom:\"100\"}],legend:{top:\"50\",data:[]},grid:{top:\"100\",bottom:\"70\"},xAxis:[{}],yAxis:[{type:\"value\",minInterval:1}],series:[]}}}},computed:{isTimeSelected:function(){return this.baseTime.every((function(t){return t}))},chartOptionWatcher:function(){var t=this.chartOption;return t.option.title.text=this.chartTitle,t}},created:function(){},methods:{wrapGetChartData:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e){var a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getChartData(e,this.baseTime);case 2:a=t.sent,this.chartData=a.sort((function(t,e){var a=n.$day(t.date),r=n.$day(e.date);return a.isAfter(r)?1:-1}));case 4:case\"end\":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getChartData:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e,a){var n,r,s,c,o,l=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=a.map((function(t){return l.$day(t).format(\"YYYY-MM-DD\")})),r=Object(i[\"a\"])(n,2),s=r[0],c=r[1],t.next=3,Object(C[\"a\"])({type:e,startDate:s,endDate:c});case 3:return o=t.sent,t.abrupt(\"return\",o.hasOwnProperty(\"data\")&&Array.isArray(o.data)&&o.data.length?o.data:[]);case 5:case\"end\":return t.stop()}}),t)})));function e(e,a){return t.apply(this,arguments)}return e}()}},M={components:{Censorshipstatus:l[\"a\"],Detail:b,Userid:u[\"a\"]},mixins:[v[\"a\"],w[\"a\"],D[\"a\"],S],data:function(){return Object(c[\"a\"])({allCensorshipTypes:y[\"c\"],chartRadio:\"推荐页banner\",visibleMap:{censorDiaVisible:!1,detailDiaVisible:!1,statusDialogVisible:!1}},x)},methods:{getData:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(){var e,a,n,r,s,c=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.baseTime.map((function(t){return c.$day(t).format(\"YYYY-MM-DD\")})),a=Object(i[\"a\"])(e,2),n=a[0],r=a[1],t.prev=1,t.next=4,Object(o[\"x\"])({startDate:n,endDate:r});case 4:s=t.sent,console.log(s),this.tableData=s.data.map((function(t){return t})),t.next=12;break;case 9:t.prev=9,t.t0=t[\"catch\"](1),console.log(t.t0);case 12:case\"end\":return t.stop()}}),t,this,[[1,9]])})));function e(){return t.apply(this,arguments)}return e}(),checkPicPass:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e,a){var n,r,i,s,c,l,u,h,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=a.title,r=a.url,i=a.order,s=e?\"1\":\"0\",c=a.type,l=a.picUrl,u=a.urlType,h=a.id,d={id:h,title:n,url:r,order:i,status:s,type:c,picUrl:l,urlType:u},console.log(d),Object(o[\"H\"])(d),this.getData(),this.getData();case 13:case\"end\":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),updateOrder:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e,a){var n,r,i,s,c,l,u,h,d,p,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=a.title,r=a.url,i=a.order,s=a.status,c=a.type,l=a.picUrl,u=a.urlType,h=a.id,!e){t.next=14;break}d=parseInt(i),d++,i=d.toString(),t.next=19;break;case 14:if(\"1\"!=i){t.next=16;break}return t.abrupt(\"return\");case 16:p=parseInt(i),p--,i=p.toString();case 19:f={id:h,title:n,url:r,order:i,status:s,type:c,picUrl:l,urlType:u},console.log(f),Object(o[\"H\"])(f),this.getData(),this.getData();case 24:case\"end\":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),handleRadioChange:function(){this.getData()},handleAddMember:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.catchedData=e,this.catchedData.typelable=this.chartRadio,this.visibleMap.detailDiaVisible=!0;case 3:case\"end\":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),checkPicRefuse:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$msgbox.confirm(\"确定删除吗\",\"提醒\",{confirmButtonText:\"删除\",cancelButtonText:\"取消\",type:\"warning\",dangerouslyUseHTMLString:!0});case 3:return a=e.id,t.next=6,Object(o[\"q\"])({bannerId:a});case 6:this.$message({type:\"success\",message:\"操作成功\"}),this.getData(),this.getData(),t.next=14;break;case 11:t.prev=11,t.t0=t[\"catch\"](0),\"cancel\"!==t.t0&&console.log(t.t0);case 14:case\"end\":return t.stop()}}),t,this,[[0,11]])})));function e(e){return t.apply(this,arguments)}return e}()}},H=M,I=Object(m[\"a\"])(H,n,r,!1,null,null,null);e[\"default\"]=I.exports},\"29ac\":function(t,e,a){},\"35a9\":function(t,e,a){\"use strict\";var n=a(\"768b\"),r=(a(\"ffc1\"),a(\"ac6a\"),a(\"7346\"));e[\"a\"]={mixins:[r[\"c\"]],watch:{$route:function(){this.reload()}},mounted:function(){var t=this;this.$nextTick((function(){return t.addTabelHeightListener(\"parent\")})),this.reload()},methods:{sortUserId:function(t,e){return t.userId-e.userId},searchData:function(){this.resetPagination()},reload:function(){var t=this,e=this.$route.params,a=e.shouldChangeForm,r=e.rewriteForm;a&&Object.entries(r).forEach((function(e){var a=Object(n[\"a\"])(e,2),r=a[0],i=a[1];return t.$set(t.searchForm,r,i)})),this.getData()}}}},3846:function(t,e,a){a(\"9e1e\")&&\"g\"!=/./g.flags&&a(\"86cc\").f(RegExp.prototype,\"flags\",{configurable:!0,get:a(\"0bfb\")})},\"4a44\":function(t,e,a){\"use strict\";(function(t){a(\"7f7f\"),a(\"96cf\");var n=a(\"3b8d\"),r=a(\"13e7\"),i=a(\"37b6\"),s=a(\"27aa\"),c=a(\"28b9\"),o=a(\"69c0\"),l=a(\"7346\");e[\"a\"]={components:{ReportStatus:s[\"a\"],Userid:c[\"a\"],Activityid:o[\"a\"]},mixins:[l[\"d\"]],props:{useData:{type:Object,default:function(){return{}}}},data:function(){return{tempImg:\"\",shopState:!0,allReportType:i[\"f\"]}},methods:{getData:function(){var t=Object(n[\"a\"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(this.useData);case 1:case\"end\":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),handleAddMember:function(){var t=Object(n[\"a\"])(regeneratorRuntime.mark((function t(){var e,a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this.useData.nickname,a=this.useData.nicknamenew,n=this.useData.date,i={from:e,to:a,date:n},console.log(i),Object(r[\"I\"])(i),this.$emit(\"emitFunc\",{function:\"getData\",arguments:[]}),this.handleDialogClose(),this.$emit(\"emitFunc\",{function:\"getData\",arguments:[]});case 9:case\"end\":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),postimg:function(){var t=Object(n[\"a\"])(regeneratorRuntime.mark((function t(e){var n,i,s,c,o,l,u,h,d,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(r[\"y\"])({});case 2:return n=t.sent,i=\"oss-cn-beijing\",s=n.data.accessKeyId,c=n.data.accessKeySecret,o=n.data.bucketName,l=a(\"9b15\"),console.log(s),u=new l({region:i,accessKeyId:s,accessKeySecret:c,stsToken:n.data.securityToken,bucket:o}),console.log(u),h=Date.parse(new Date),d=\"\".concat(h),d=Base64.encode(d),d=\"shop/\"+d,console.log(d),t.prev=16,t.next=19,u.put(d,e);case 19:p=t.sent,console.log(p),this.tempImg=p.url,console.log(tempImg),t.next=28;break;case 25:t.prev=25,t.t0=t[\"catch\"](16),console.log(t.t0);case 28:case\"end\":return t.stop()}}),t,this,[[16,25]])})));function e(e){return t.apply(this,arguments)}return e}(),uploadFile:function(){var t=Object(n[\"a\"])(regeneratorRuntime.mark((function t(e){var a,n,r,i,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=this,n=e.target.files[0],r=n.name.lastIndexOf(\".\"),i=n.name.substr(r),s=n.name.substr(0,r),c=Date.parse(new Date),s=\"\".concat(s,\"_\").concat(c).concat(i),a.postimg(n);case 8:case\"end\":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),compress:function(e,a){var n=document.createElement(\"canvas\"),r=n.getContext(\"2d\"),i=(e.src.length,e.width),s=e.height;n.width=i,n.height=s,r.fillStyle=\"#fff\",r.fillRect(0,0,n.width,n.height),r.drawImage(e,0,0,i,s);var c=n.toDataURL(\"image/jpeg\",a);console.log(\"*******压缩后的图片大小*******\"),console.log(c.length/1024);var o=t.from(c,\"base64\");return console.log(o),o},handleRadioChange:function(t){this.shopState=\"启用\"===this.chartRadio}}}}).call(this,a(\"b639\").Buffer)},\"62b1\":function(t,e,a){\"use strict\";var n=a(\"1b82\"),r=a.n(n);r.a},\"6b54\":function(t,e,a){\"use strict\";a(\"3846\");var n=a(\"cb7c\"),r=a(\"0bfb\"),i=a(\"9e1e\"),s=\"toString\",c=/./[s],o=function(t){a(\"2aba\")(RegExp.prototype,s,t,!0)};a(\"79e5\")((function(){return\"/a/b\"!=c.call({source:\"a\",flags:\"b\"})}))?o((function(){var t=n(this);return\"/\".concat(t.source,\"/\",\"flags\"in t?t.flags:!i&&t instanceof RegExp?r.call(t):void 0)})):c.name!=s&&o((function(){return c.call(this)}))},\"9f2d\":function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return r})),a.d(e,\"e\",(function(){return i})),a.d(e,\"b\",(function(){return s})),a.d(e,\"c\",(function(){return c})),a.d(e,\"d\",(function(){return o}));var n=a(\"b775\");function r(t){return Object(n[\"a\"])({url:\"/tool/get_statistics\",method:\"get\",params:t})}function i(t){return Object(n[\"a\"])({url:\"/tool/sum_statistics\",method:\"get\",params:t})}function s(t){return Object(n[\"a\"])({url:\"/tool/get_user_stay\",method:\"get\",params:t})}function c(t){return Object(n[\"a\"])({url:\"/tool/get_user_trace\",method:\"get\",params:t})}function o(t){return Object(n[\"a\"])({url:\"/tool/get_influencer\",method:\"get\",params:t})}},e33a:function(t,e,a){\"use strict\";a(\"f6b3\"),a(\"ac6a\"),a(\"456d\");var n=a(\"9abb\"),r={components:{Paginationtpl:n[\"a\"]},data:function(){return{pagination:{page:1,pageSize:10},paginationTotal:0}},watch:{pagination:{handler:function(){this.getData()},deep:!0}},methods:{resetPagination:function(){this.pagination={page:1,pageSize:10}}}};e[\"a\"]={mixins:[r],data:function(){return{refMap:{table:\"mainTable\"},tableData:[],catchedDataArr:[],catchedData:{},catchedRadio:null,tableSelected:!1,tableHeight:200,extraHeight:110,loadingMap:{tableLoading:!1},visibleMap:{tableVisible:!1},renderMap:{tableRender:!1},switchMap:{getDataOnRender:!0}}},computed:{isTableRadioSelected:function(){return Object.keys(this.catchedData).length},isTableCheckBoxSelected:function(){return this.catchedDataArr.length>0}},mounted:function(){Reflect.has(this,\"getData\")&&this.switchMap.getDataOnRender&&this.getData()},watch:{\"loadingMap.tableLoading\":function(t){var e=this;t||this.$nextTick((function(){var t=e.$refs[e.refMap.table];t&&t.doLayout()}))}},methods:{handleTableCheckBoxSelect:function(t){this.catchedDataArr=t,this.tableSelected=this.$refs[this.refMap.table].selection.length>0},handleTabelRadioClick:function(t){this.catchedRadio=t,this.catchedData=this.tableData[t]},handleTableItemClick:function(t){this.catchedData=t},setTableHeightBySelf:function(){var t=this.minTableHeight,e=void 0===t?0:t,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,r=this.$el.clientHeight-this.extraHeight-n;this.tableHeight=r<e?e:r},setTableHeightByParent:function(){var t=this.minTableHeight,e=void 0===t?0:t,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,r=this.$parent.$el.clientHeight-this.extraHeight-n;this.tableHeight=r<e?e:r},watchResizeFinish:function(t,e){var a=this;return clearTimeout(e),e=setTimeout((function(){return new Promise((function(e){a.renderMap.tableRender=!0,e(t()),a.$nextTick((function(){setTimeout((function(){a.renderMap.tableRender=!1}),100)}))}))}),100),e},addTabelHeightListener:function(){var t,e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"self\",n=\"self\"===a?this.$el:this.$parent.$el,r=\"self\"===a?this.setTableHeightBySelf:this.setTableHeightByParent;this.$erd.listenTo(n,(function(a){e.renderMap.tableRender||(t=e.watchResizeFinish(r,t))}))},isTableSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"请先选择需要修改的数据\";return!(!this.isTableRadioSelected&&!this.isTableCheckBoxSelected)||(this.$message({type:\"warning\",message:t}),!1)},formatColumn:function(t,e,a,n){return null===a||\"\"===a||void 0===a?\"--\":a}},beforeDestroy:function(){this.$erd.removeAllListeners(this.$el)}}}}]);","extractedComments":[]}