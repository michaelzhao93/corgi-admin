{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-436c5efe\"],{\"0b0e\":function(e,t,a){},3846:function(e,t,a){a(\"9e1e\")&&\"g\"!=/./g.flags&&a(\"86cc\").f(RegExp.prototype,\"flags\",{configurable:!0,get:a(\"0bfb\")})},\"3d55\":function(e,t,a){\"use strict\";var n=a(\"0b0e\"),r=a.n(n);r.a},\"4c02\":function(e,t,a){\"use strict\";var n=a(\"768b\"),r=(a(\"ffc1\"),a(\"ac6a\"),a(\"7346\"));t[\"a\"]={mixins:[r[\"c\"]],watch:{$route:function(){this.reload()}},mounted:function(){var e=this;this.$nextTick((function(){return e.addTabelHeightListener(\"parent\")})),this.reload()},methods:{sortUserId:function(e,t){return e.userId-t.userId},searchData:function(){this.resetPagination()},reload:function(){var e=this,t=this.$route.params,a=t.shouldChangeForm,r=t.rewriteForm;a&&Object.entries(r).forEach((function(t){var a=Object(n[\"a\"])(t,2),r=a[0],i=a[1];return e.$set(e.searchForm,r,i)})),this.getData()}}}},\"587f\":function(e,t,a){\"use strict\";(function(e){a(\"7f7f\"),a(\"96cf\");var n=a(\"3b8d\"),r=a(\"13e7\"),i=a(\"37b6\"),s=a(\"27aa\"),c=a(\"28b9\"),o=a(\"69c0\"),l=a(\"7346\");t[\"a\"]={components:{ReportStatus:s[\"a\"],Userid:c[\"a\"],Activityid:o[\"a\"]},mixins:[l[\"d\"]],props:{useData:{type:Object,default:function(){return{}}}},data:function(){return{tempImg:\"\",shopState:!0,allReportType:i[\"f\"]}},methods:{getData:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(this.useData);case 1:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleAddMember:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(){var t,a,n,i,s,c,o,l,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=this.useData.barId,a=this.useData.activityId,n=this.useData.id,i=this.useData.startTime,s=this.useData.endTime,c=this.useData.order,o=this.useData.status,l=\"recommend\",u=\"\",e.t0=this.useData.radio,e.next=\"活动当地\"===e.t0?12:\"全国\"===e.t0?14:16;break;case 12:return u=this.useData.city,e.abrupt(\"break\",17);case 14:return u=\"全国\",e.abrupt(\"break\",17);case 16:throw new Error(\"Table Layout don't have event \"+this.chartRadio+\".\");case 17:d={id:n,barId:t,activityId:a,startTime:i,endTime:s,order:c,status:o,type:l,city:u},console.log(d),Object(r[\"J\"])(d),this.$emit(\"emitFunc\",{function:\"getData\",arguments:[]}),this.handleDialogClose(),this.$emit(\"emitFunc\",{function:\"getData\",arguments:[]});case 23:case\"end\":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),postimg:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(t){var n,i,s,c,o,l,u,d,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(r[\"y\"])({});case 2:return n=e.sent,i=\"oss-cn-beijing\",s=n.data.accessKeyId,c=n.data.accessKeySecret,o=n.data.bucketName,l=a(\"9b15\"),console.log(s),u=new l({region:i,accessKeyId:s,accessKeySecret:c,stsToken:n.data.securityToken,bucket:o}),console.log(u),d=Date.parse(new Date),h=\"\".concat(d),h=Base64.encode(h),h=\"shop/\"+h,console.log(h),e.prev=16,e.next=19,u.put(h,t);case 19:m=e.sent,console.log(m),this.tempImg=m.url,console.log(tempImg),e.next=28;break;case 25:e.prev=25,e.t0=e[\"catch\"](16),console.log(e.t0);case 28:case\"end\":return e.stop()}}),e,this,[[16,25]])})));function t(t){return e.apply(this,arguments)}return t}(),uploadFile:function(){var e=Object(n[\"a\"])(regeneratorRuntime.mark((function e(t){var a,n,r,i,s,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=this,n=t.target.files[0],r=n.name.lastIndexOf(\".\"),i=n.name.substr(r),s=n.name.substr(0,r),c=Date.parse(new Date),s=\"\".concat(s,\"_\").concat(c).concat(i),a.postimg(n);case 8:case\"end\":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),compress:function(t,a){var n=document.createElement(\"canvas\"),r=n.getContext(\"2d\"),i=(t.src.length,t.width),s=t.height;n.width=i,n.height=s,r.fillStyle=\"#fff\",r.fillRect(0,0,n.width,n.height),r.drawImage(t,0,0,i,s);var c=n.toDataURL(\"image/jpeg\",a);console.log(\"*******压缩后的图片大小*******\"),console.log(c.length/1024);var o=e.from(c,\"base64\");return console.log(o),o},handleRadioChange:function(e){this.shopState=\"启用\"===this.chartRadio}}}}).call(this,a(\"b639\").Buffer)},\"6b54\":function(e,t,a){\"use strict\";a(\"3846\");var n=a(\"cb7c\"),r=a(\"0bfb\"),i=a(\"9e1e\"),s=\"toString\",c=/./[s],o=function(e){a(\"2aba\")(RegExp.prototype,s,e,!0)};a(\"79e5\")((function(){return\"/a/b\"!=c.call({source:\"a\",flags:\"b\"})}))?o((function(){var e=n(this);return\"/\".concat(e.source,\"/\",\"flags\"in e?e.flags:!i&&e instanceof RegExp?r.call(e):void 0)})):c.name!=s&&o((function(){return c.call(this)}))},a29e:function(e,t,a){\"use strict\";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"contentMgr-avator\"},[a(\"div\",{staticClass:\"flex search-bar\"},[a(\"el-form\",{staticClass:\"flex-wrap filter\"})],1),e._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loadingMap.tableLoading,expression:\"loadingMap.tableLoading\"}],ref:e.refMap.table,staticClass:\"main-table\",staticStyle:{width:\"100%\"},attrs:{data:e.tableData,border:!0,\"header-cell-style\":{textAlign:\"center\"}}},[a(\"el-table-column\",{attrs:{label:\"活动ID\",align:\"center\",prop:\"activityId\"}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"商户活动名称\",align:\"center\",prop:\"activityname\",formatter:e.formatColumn}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"展示区域\",align:\"center\",prop:\"area\",formatter:e.formatColumn}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"投放地区\",align:\"center\",prop:\"city\",formatter:e.formatColumn}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"投放开始时间\",align:\"center\",prop:\"startTime\",formatter:e.formatColumn}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"投放结束时间\",align:\"center\",prop:\"endTime\",formatter:e.formatColumn}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"状态\",align:\"center\",prop:\"state\",formatter:e.formatColumn}}),e._v(\" \"),a(\"el-table-column\",{attrs:{sortable:\"\",label:\"顺序\",align:\"center\",prop:\"order\",formatter:e.formatColumn}}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"230\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"success\",size:\"mini\"},on:{click:function(a){return e.handleAddMember(t.row)}}},[e._v(\"编辑\")]),e._v(\" \"),\"禁用\"==t.row.state?a(\"el-button\",{attrs:{type:\"danger\",size:\"mini\"},on:{click:function(a){return e.checkPicPass(!0,t.row)}}},[e._v(\"启用\")]):e._e(),e._v(\" \"),\"启用\"==t.row.state?a(\"el-button\",{attrs:{type:\"danger\",size:\"mini\"},on:{click:function(a){return e.checkPicPass(!1,t.row)}}},[e._v(\"禁用\")]):e._e(),e._v(\" \"),a(\"el-button\",{attrs:{type:\"info\",size:\"mini\"},on:{click:function(a){return e.checkPicRefuse(t.row)}}},[e._v(\"删除\")])]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"顺序\",align:\"center\",width:\"150\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{attrs:{type:\"success\",size:\"mini\"},on:{click:function(a){return e.updateOrder(!0,t.row)}}},[e._v(\"向后\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"danger\",size:\"mini\"},on:{click:function(a){return e.updateOrder(!1,t.row)}}},[e._v(\"向前\")])]}}])})],1),e._v(\" \"),a(\"detail\",{attrs:{\"use-data\":e.catchedData,visible:e.visibleMap.detailDiaVisible},on:{\"update:visible\":function(t){return e.$set(e.visibleMap,\"detailDiaVisible\",t)},emitFunc:e.acceptEmitFunc}})],1)},r=[],i=(a(\"6b54\"),a(\"96cf\"),a(\"3b8d\")),s=a(\"db72\"),c=a(\"13e7\"),o=a(\"aea5\"),l=a(\"28b9\"),u=a(\"e33a\"),d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"div\",{staticClass:\"dialog-report\"},[a(\"el-dialog\",{attrs:{title:\"更新热门\",top:\"8vh\",visible:e.show,width:\"600px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){e.show=t}}},[a(\"div\",{staticClass:\"detail-dialog-wrap\"},[a(\"vue-scroll\",[a(\"el-form\",{ref:\"form\",attrs:{model:e.useData,\"label-width\":\"140px\"}},[a(\"el-form-item\",{attrs:{label:\"商户活动名称\",prop:\"reportUserName\"}},[a(\"el-input\",{staticStyle:{width:\"50%\"},attrs:{name:\"title\",tabindex:\"1\",\"auto-complete\":\"off\"},model:{value:e.useData.title,callback:function(t){e.$set(e.useData,\"title\",t)},expression:\"useData.title\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"投放地区\",prop:\"accuseName\"}},[a(\"el-radio-group\",{staticClass:\"radio-group\",attrs:{size:\"mini\"},on:{change:e.handleRadioChange},model:{value:e.useData.radio,callback:function(t){e.$set(e.useData,\"radio\",t)},expression:\"useData.radio\"}},[a(\"el-radio-button\",{attrs:{label:\"活动当地\"}}),e._v(\" \"),a(\"el-radio-button\",{attrs:{label:\"全国\"}})],1)],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动时间\",prop:\"accuseId\"}},[e._v(\"\\n      自：        \\n  \"),a(\"el-date-picker\",{staticStyle:{width:\"50%\"},attrs:{type:\"datetime\",format:\"yyyy-MM-dd HH:mm\",\"value-format\":\"yyyy-MM-dd HH:mm\",placeholder:\"选择日期时间\"},model:{value:e.useData.startTime,callback:function(t){e.$set(e.useData,\"startTime\",t)},expression:\"useData.startTime\"}})],1),e._v(\" \"),a(\"el-form-item\",{attrs:{label:\"\",prop:\"accuseType\"}},[e._v(\"\\n\\n      \\n              至：    \"),a(\"el-date-picker\",{staticStyle:{width:\"50%\"},attrs:{type:\"datetime\",format:\"yyyy-MM-dd HH:mm\",\"value-format\":\"yyyy-MM-dd HH:mm\",placeholder:\"选择日期时间\"},model:{value:e.useData.endTime,callback:function(t){e.$set(e.useData,\"endTime\",t)},expression:\"useData.endTime\"}})],1)],1),e._v(\" \"),a(\"el-button\",{staticStyle:{width:\"10%\",\"margin-left\":\"50%\",\"margin-top\":\"20px\"},attrs:{type:\"primary\",size:\"small\"},on:{click:function(t){return e.handleAddMember()}}},[e._v(\"更新\")])],1)],1)])],1)},h=[],m=a(\"587f\"),f=m[\"a\"],p=(a(\"3d55\"),a(\"2877\")),b=Object(p[\"a\"])(f,d,h,!1,null,null,null),g=b.exports,v=a(\"4c02\"),y=a(\"37b6\"),w=a(\"7346\"),D={searchForm:{status:\"\"},formRules:{},censorType:\"user\"},x={components:{Censorshipstatus:o[\"a\"],Detail:g,Userid:l[\"a\"]},mixins:[u[\"a\"],v[\"a\"],w[\"a\"]],data:function(){return Object(s[\"a\"])({allCensorshipTypes:y[\"c\"],chartRadio:\"推荐页banner\",visibleMap:{censorDiaVisible:!1,detailDiaVisible:!1,statusDialogVisible:!1}},D)},methods:{getData:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(c[\"A\"])({});case 3:t=e.sent,console.log(t),this.tableData=t.data.map((function(e){return e.state=0==e.status?\"禁用\":\"启用\",\"全国\"==e.city?e.radio=\"全国\":e.radio=\"活动当地\",e.area=\"热门活动\",e})),e.next=11;break;case 8:e.prev=8,e.t0=e[\"catch\"](0),console.log(e.t0);case 11:case\"end\":return e.stop()}}),e,this,[[0,8]])})));function t(){return e.apply(this,arguments)}return t}(),checkPicPass:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(t,a){var n,r,i,s,o,l,u,d,h,m;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=a.id,r=a.barId,i=a.activityId,s=a.startTime,o=a.endTime,l=a.order,u=\"recommend\",d=a.city,h=t?\"1\":\"0\",m={id:n,barId:r,activityId:i,startTime:s,endTime:o,order:l,status:h,type:u,city:d},Object(c[\"J\"])(m),console.log(m),this.getData(),this.getData();case 14:case\"end\":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),updateOrder:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(t,a){var n,r,i,s,o,l,u,d,h,m,f,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a.id,r=a.barId,i=a.activityId,s=a.startTime,o=a.endTime,l=a.order,u=a.status,d=\"recommend\",h=a.city,!t){e.next=15;break}m=parseInt(l),m++,l=m.toString(),e.next=20;break;case 15:if(\"1\"!=l){e.next=17;break}return e.abrupt(\"return\");case 17:f=parseInt(l),f--,l=f.toString();case 20:p={id:n,barId:r,activityId:i,startTime:s,endTime:o,order:l,status:u,type:d,city:h},console.log(p),Object(c[\"J\"])(p),this.getData(),this.getData();case 25:case\"end\":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),handleRadioChange:function(e){this.getData()},handleAddMember:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.catchedData=t,this.visibleMap.detailDiaVisible=!0;case 2:case\"end\":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),checkPicRefuse:function(){var e=Object(i[\"a\"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$msgbox.confirm(\"确定删除吗\",\"提醒\",{confirmButtonText:\"删除\",cancelButtonText:\"取消\",type:\"warning\",dangerouslyUseHTMLString:!0});case 3:return a=t.id,e.next=6,Object(c[\"r\"])({hotId:a});case 6:this.$message({type:\"success\",message:\"操作成功\"}),this.getData(),this.getData(),e.next=14;break;case 11:e.prev=11,e.t0=e[\"catch\"](0),\"cancel\"!==e.t0&&console.log(e.t0);case 14:case\"end\":return e.stop()}}),e,this,[[0,11]])})));function t(t){return e.apply(this,arguments)}return t}()}},k=x,T=Object(p[\"a\"])(k,n,r,!1,null,null,null);t[\"default\"]=T.exports},e33a:function(e,t,a){\"use strict\";a(\"f6b3\"),a(\"ac6a\"),a(\"456d\");var n=a(\"9abb\"),r={components:{Paginationtpl:n[\"a\"]},data:function(){return{pagination:{page:1,pageSize:10},paginationTotal:0}},watch:{pagination:{handler:function(){this.getData()},deep:!0}},methods:{resetPagination:function(){this.pagination={page:1,pageSize:10}}}};t[\"a\"]={mixins:[r],data:function(){return{refMap:{table:\"mainTable\"},tableData:[],catchedDataArr:[],catchedData:{},catchedRadio:null,tableSelected:!1,tableHeight:200,extraHeight:110,loadingMap:{tableLoading:!1},visibleMap:{tableVisible:!1},renderMap:{tableRender:!1},switchMap:{getDataOnRender:!0}}},computed:{isTableRadioSelected:function(){return Object.keys(this.catchedData).length},isTableCheckBoxSelected:function(){return this.catchedDataArr.length>0}},mounted:function(){Reflect.has(this,\"getData\")&&this.switchMap.getDataOnRender&&this.getData()},watch:{\"loadingMap.tableLoading\":function(e){var t=this;e||this.$nextTick((function(){var e=t.$refs[t.refMap.table];e&&e.doLayout()}))}},methods:{handleTableCheckBoxSelect:function(e){this.catchedDataArr=e,this.tableSelected=this.$refs[this.refMap.table].selection.length>0},handleTabelRadioClick:function(e){this.catchedRadio=e,this.catchedData=this.tableData[e]},handleTableItemClick:function(e){this.catchedData=e},setTableHeightBySelf:function(){var e=this.minTableHeight,t=void 0===e?0:e,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,r=this.$el.clientHeight-this.extraHeight-n;this.tableHeight=r<t?t:r},setTableHeightByParent:function(){var e=this.minTableHeight,t=void 0===e?0:e,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,r=this.$parent.$el.clientHeight-this.extraHeight-n;this.tableHeight=r<t?t:r},watchResizeFinish:function(e,t){var a=this;return clearTimeout(t),t=setTimeout((function(){return new Promise((function(t){a.renderMap.tableRender=!0,t(e()),a.$nextTick((function(){setTimeout((function(){a.renderMap.tableRender=!1}),100)}))}))}),100),t},addTabelHeightListener:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"self\",n=\"self\"===a?this.$el:this.$parent.$el,r=\"self\"===a?this.setTableHeightBySelf:this.setTableHeightByParent;this.$erd.listenTo(n,(function(a){t.renderMap.tableRender||(e=t.watchResizeFinish(r,e))}))},isTableSelected:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"请先选择需要修改的数据\";return!(!this.isTableRadioSelected&&!this.isTableCheckBoxSelected)||(this.$message({type:\"warning\",message:e}),!1)},formatColumn:function(e,t,a,n){return null===a||\"\"===a||void 0===a?\"--\":a}},beforeDestroy:function(){this.$erd.removeAllListeners(this.$el)}}}}]);","extractedComments":[]}