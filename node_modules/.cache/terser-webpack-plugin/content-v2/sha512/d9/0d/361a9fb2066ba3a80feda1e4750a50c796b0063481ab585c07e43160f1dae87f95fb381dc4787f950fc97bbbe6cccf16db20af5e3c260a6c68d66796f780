{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-15e394b8\"],{\"36bd\":function(t,e,a){\"use strict\";var n=a(\"4bf8\"),i=a(\"77f1\"),r=a(\"9def\");t.exports=function(t){var e=n(this),a=r(e.length),o=arguments.length,c=i(o>1?arguments[1]:void 0,a),l=o>2?arguments[2]:void 0,s=void 0===l?a:i(l,a);while(s>c)e[c++]=t;return e}},\"48e8\":function(t,e,a){},\"598a\":function(t,e,a){\"use strict\";var n=a(\"48e8\"),i=a.n(n);i.a},\"6c7b\":function(t,e,a){var n=a(\"5ca1\");n(n.P,\"Array\",{fill:a(\"36bd\")}),a(\"9c6c\")(\"fill\")},\"70a6\":function(t,e,a){\"use strict\";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"keep-analyse\"},[t._m(0),t._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loadingMap.tableLoading,expression:\"loadingMap.tableLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.tableData,border:!0,\"header-cell-style\":{textAlign:\"center\"},height:400,\"cell-style\":t.getColumnStyle},on:{\"cell-dblclick\":t.tableDbEdit}},[a(\"el-table-column\",{attrs:{label:\"狗/游戏/肉长/比我矮\",align:\"center\",prop:\"first\",fixed:\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{label:\"猫/健身/精瘦/比我高\",align:\"center\",prop:\"second\"}})],1),t._v(\" \"),a(\"div\",{staticClass:\"title-container\"},[a(\"h5\",{staticClass:\"text\"},[t._v(\"双击数字进行修改，全部修改完毕后手动点击“更新数据”按钮进行数据更新\")]),t._v(\" \"),a(\"el-button\",{staticStyle:{width:\"10%\",\"margin-left\":\"45%\",\"margin-top\":\"20px\"},attrs:{type:\"primary\",size:\"small\"},on:{click:t.UpdateData}},[t._v(\"更新数据\")])],1)],1)},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"title-container\"},[a(\"h5\",{staticClass:\"title\"},[t._v(\"兴趣因子\")])])}],r=(a(\"7514\"),a(\"96cf\"),a(\"3b8d\")),o=(a(\"c5f6\"),a(\"6c7b\"),a(\"768b\")),c=(a(\"ac6a\"),a(\"ffc1\"),a(\"db72\")),l=a(\"e33a\"),s=a(\"7346\"),u=(a(\"9f2d\"),a(\"37b6\")),d=a(\"852c\"),h=a(\"5a0c\"),f=a.n(h),b=new Date,g=[f()(b).subtract(30,\"day\").toDate(),b],m={searchForm:{dateRange:g,stayCount:30},formRules:{dateRange:{required:!0,message:\"请选择日期\",trigger:\"blur\"},stayCount:{required:!0,message:\"请输入停留天数\",trigger:\"blur\"}}},p={mixins:[l[\"a\"],s[\"c\"]],data:function(){return Object(c[\"a\"])(Object(c[\"a\"])({},m),{},{pickerOptions:u[\"l\"],extraHeight:0,loadingMap:{tableLoading:!1}})},beforeMount:function(){var t=this;this.$nextTick((function(){t.addTabelHeightListener(\"parent\"),t.getPageData()}))},methods:{generateData:function(t){var e=this;console.log(t);var a=Object.entries(t).reduce((function(t,a){var n=Object(o[\"a\"])(a,2),i=n[0],r=n[1];return t[i]=\"stayCount\"===i?r:e.$day(r),t}),{}),n=a.startDate,i=a.endDate,r=a.stayCount,c=Math.abs(n.diff(i,\"day\"));return Array(c).fill(\"\").map((function(t,e){var a=n.add(e,\"day\"),i=Math.floor(1e3*Math.random());return Array(Number(r)+1).fill(\"\").map((function(t,e){return i=parseInt(i*(1-Math.floor(30*Math.random())/100)),{loginDate:a.format(\"YYYY-MM-DD\"),stayDate:a.add(e,\"day\").format(\"YYYY-MM-DD\"),stayCount:e,count:i}}))})).flat(1/0)},UpdateData:function(){console.log(\"update\"),Object(d[\"d\"])(),this.$message({type:\"success\",message:\"更新成功\"})},tableDbEdit:function(t,e,a,n){var i=this;if(console.log(t,e,a,n),\"身材\"!=e.label){n.target.innerHTML=\"\";var r=document.createElement(\"input\");r.value=\"\",r.setAttribute(\"type\",\"number\"),r.style.width=\"70%\",a.appendChild(r),r.onblur=function(){a.removeChild(r),n.target.innerHTML=r.value;t.role;var o,c=e.label,l=0,s={};\"狗/游戏/肉长/比我矮\"==c&&(o=r.value,l=i.tableData[0].second,i.tableData[0].first=o),\"猫/健身/精瘦/比我高\"==c&&(l=r.value,o=i.tableData[0].first,i.tableData[0].second=l),s.value=o+\",\"+l,s.table=\"int\";Object(d[\"e\"])(s);console.log(s)}}},getPageData:function(){var t=Object(r[\"a\"])(regeneratorRuntime.mark((function t(){var e,a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loadingMap.tableLoading=!0,e=\"int\",t.next=5,Object(d[\"b\"])({table:e});case 5:a=t.sent,console.log(a),n=[],n.push({first:a.data[0],second:a.data[1]}),this.tableData=n,t.next=16;break;case 12:t.prev=12,t.t0=t[\"catch\"](0),console.log(t.t0),this.tableData=[];case 16:return t.prev=16,this.loadingMap.tableLoading=!1,t.finish(16);case 19:case\"end\":return t.stop()}}),t,this,[[0,12,16,19]])})));function e(){return t.apply(this,arguments)}return e}(),getColumnStyle:function(t){var e=t.row,a=t.column,n=(t.rowIndex,t.columnIndex,e[a.property]);if(\"number\"===typeof n&&0!==e.base){var i=(n/e.base*100).toFixed(1),r=u[\"j\"].find((function(t){return i>=t.min&&i<=t.max}));return r&&{backgroundColor:r.background,color:r.color||\"#000\"}}}}},v=p,D=(a(\"598a\"),a(\"2877\")),y=Object(D[\"a\"])(v,n,i,!1,null,\"8e8c1c44\",null);e[\"default\"]=y.exports},\"852c\":function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return i})),a.d(e,\"b\",(function(){return r})),a.d(e,\"c\",(function(){return o})),a.d(e,\"f\",(function(){return c})),a.d(e,\"e\",(function(){return l})),a.d(e,\"g\",(function(){return s})),a.d(e,\"d\",(function(){return u}));var n=a(\"b775\");a(\"4328\");function i(t){return Object(n[\"a\"])({url:\"/tool/get_match_factor\",method:\"get\",params:t})}function r(t){return Object(n[\"a\"])({url:\"/tool/get_match_factor2\",method:\"get\",params:t})}function o(t){return Object(n[\"a\"])({url:\"/tool/get_match_ratio\",method:\"get\",params:t})}function c(t){return Object(n[\"a\"])({url:\"/tool/set_match_ratio\",method:\"get\",params:t})}function l(t){return Object(n[\"a\"])({url:\"/tool/set_match_factor2\",method:\"get\",params:t})}function s(t){return Object(n[\"a\"])({url:\"/tool/update_match_factor\",method:\"get\",params:t})}function u(){return Object(n[\"a\"])({url:\"/tool/refresh_all_match\",method:\"get\"})}},\"9f2d\":function(t,e,a){\"use strict\";a.d(e,\"a\",(function(){return i})),a.d(e,\"d\",(function(){return r})),a.d(e,\"b\",(function(){return o})),a.d(e,\"c\",(function(){return c}));var n=a(\"b775\");function i(t){return Object(n[\"a\"])({url:\"/tool/get_statistics\",method:\"get\",params:t})}function r(t){return Object(n[\"a\"])({url:\"/tool/sum_statistics\",method:\"get\",params:t})}function o(t){return Object(n[\"a\"])({url:\"/tool/get_user_stay\",method:\"get\",params:t})}function c(t){return Object(n[\"a\"])({url:\"/tool/get_user_trace\",method:\"get\",params:t})}},e33a:function(t,e,a){\"use strict\";a(\"f6b3\"),a(\"ac6a\"),a(\"456d\");var n=a(\"9abb\"),i={components:{Paginationtpl:n[\"a\"]},data:function(){return{pagination:{page:1,pageSize:10},paginationTotal:0}},watch:{pagination:{handler:function(){this.getData()},deep:!0}},methods:{resetPagination:function(){this.pagination={page:1,pageSize:10}}}};e[\"a\"]={mixins:[i],data:function(){return{refMap:{table:\"mainTable\"},tableData:[],catchedDataArr:[],catchedData:{},catchedRadio:null,tableSelected:!1,tableHeight:200,extraHeight:110,loadingMap:{tableLoading:!1},visibleMap:{tableVisible:!1},renderMap:{tableRender:!1},switchMap:{getDataOnRender:!0}}},computed:{isTableRadioSelected:function(){return Object.keys(this.catchedData).length},isTableCheckBoxSelected:function(){return this.catchedDataArr.length>0}},mounted:function(){Reflect.has(this,\"getData\")&&this.switchMap.getDataOnRender&&this.getData()},watch:{\"loadingMap.tableLoading\":function(t){var e=this;t||this.$nextTick((function(){var t=e.$refs[e.refMap.table];t&&t.doLayout()}))}},methods:{handleTableCheckBoxSelect:function(t){this.catchedDataArr=t,this.tableSelected=this.$refs[this.refMap.table].selection.length>0},handleTabelRadioClick:function(t){this.catchedRadio=t,this.catchedData=this.tableData[t]},handleTableItemClick:function(t){this.catchedData=t},setTableHeightBySelf:function(){var t=this.minTableHeight,e=void 0===t?0:t,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,i=this.$el.clientHeight-this.extraHeight-n;this.tableHeight=i<e?e:i},setTableHeightByParent:function(){var t=this.minTableHeight,e=void 0===t?0:t,a=this.$refs[this.searchRef],n=a&&a.$el.clientHeight||0,i=this.$parent.$el.clientHeight-this.extraHeight-n;this.tableHeight=i<e?e:i},watchResizeFinish:function(t,e){var a=this;return clearTimeout(e),e=setTimeout((function(){return new Promise((function(e){a.renderMap.tableRender=!0,e(t()),a.$nextTick((function(){setTimeout((function(){a.renderMap.tableRender=!1}),100)}))}))}),100),e},addTabelHeightListener:function(){var t,e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"self\",n=\"self\"===a?this.$el:this.$parent.$el,i=\"self\"===a?this.setTableHeightBySelf:this.setTableHeightByParent;this.$erd.listenTo(n,(function(a){e.renderMap.tableRender||(t=e.watchResizeFinish(i,t))}))},isTableSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"请先选择需要修改的数据\";return!(!this.isTableRadioSelected&&!this.isTableCheckBoxSelected)||(this.$message({type:\"warning\",message:t}),!1)},formatColumn:function(t,e,a,n){return null===a||\"\"===a||void 0===a?\"--\":a}},beforeDestroy:function(){this.$erd.removeAllListeners(this.$el)}}},f6b3:function(t,e,a){var n=a(\"5ca1\");n(n.S,\"Reflect\",{has:function(t,e){return e in t}})}}]);","extractedComments":[]}