{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-5849ba68\"],{\"35a9\":function(t,e,a){\"use strict\";var i=a(\"768b\"),r=(a(\"ffc1\"),a(\"ac6a\"),a(\"7346\"));e[\"a\"]={mixins:[r[\"c\"]],watch:{$route:function(){this.reload()}},mounted:function(){var t=this;this.$nextTick((function(){return t.addTabelHeightListener(\"parent\")})),this.reload()},methods:{sortUserId:function(t,e){return t.userId-e.userId},searchData:function(){this.resetPagination()},reload:function(){var t=this,e=this.$route.params,a=e.shouldChangeForm,r=e.rewriteForm;a&&Object.entries(r).forEach((function(e){var a=Object(i[\"a\"])(e,2),r=a[0],s=a[1];return t.$set(t.searchForm,r,s)})),this.getData()}}}},\"5c51\":function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"contentMgr-activity\"},[a(\"div\",{staticClass:\"flex search-bar\"},[a(\"el-form\",{ref:t.searchRef,staticClass:\"flex-wrap filter\",attrs:{model:t.searchForm,rules:t.formRules}},[a(\"el-form-item\",{staticClass:\"flex filter-item\",attrs:{label:\"活动ID\",prop:\"activityId\"}},[a(\"el-input\",{attrs:{type:\"text\",placeholder:\"请输入活动ID\"},model:{value:t.searchForm.id,callback:function(e){t.$set(t.searchForm,\"id\",e)},expression:\"searchForm.id\"}})],1),t._v(\" \"),a(\"el-form-item\",{staticClass:\"flex filter-item\",attrs:{label:\"活动标题\",prop:\"title\"}},[a(\"el-input\",{attrs:{type:\"text\",placeholder:\"请输入活动标题\"},model:{value:t.searchForm.title,callback:function(e){t.$set(t.searchForm,\"title\",e)},expression:\"searchForm.title\"}})],1),t._v(\" \"),a(\"el-form-item\",{staticClass:\"flex filter-item\",attrs:{label:\"活动类型\",prop:\"activityType\"}},[a(\"el-input\",{attrs:{type:\"text\",placeholder:\"请输入活动类型\"},model:{value:t.searchForm.activityType,callback:function(e){t.$set(t.searchForm,\"activityType\",e)},expression:\"searchForm.activityType\"}})],1),t._v(\" \"),a(\"el-form-item\",{staticClass:\"flex filter-item\",attrs:{label:\"城市\",prop:\"city\"}},[a(\"el-input\",{attrs:{type:\"text\",placeholder:\"请输入城市全称（市）\"},model:{value:t.searchForm.city,callback:function(e){t.$set(t.searchForm,\"city\",e)},expression:\"searchForm.city\"}})],1),t._v(\" \"),a(\"el-form-item\",{staticClass:\"flex filter-item\",attrs:{label:\"审核状态\",prop:\"checkStatus\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择审核状态\"},model:{value:t.searchForm.checkStatus,callback:function(e){t.$set(t.searchForm,\"checkStatus\",e)},expression:\"searchForm.checkStatus\"}},t._l(t.allActivityCheckStatus,(function(t,e){return a(\"el-option\",{key:\"user-check-status-\"+e,attrs:{label:t.label,value:t.value}})})),1)],1)],1),t._v(\" \"),a(\"div\",{staticClass:\"search-btnGroup flex\"},[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.searchData}},[t._v(\"搜索\")]),t._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\"},on:{click:t.resetForm}},[t._v(\"重置\")])],1)],1),t._v(\" \"),a(\"div\",{staticClass:\"page-desc\"},[t._v(t._s(t.$route.meta.title)+\"：展示所有历史累计活动信息以及管理（注意：删除活动将物理删除，无法恢复。）\")]),t._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.loadingMap.tableLoading,expression:\"loadingMap.tableLoading\"}],ref:t.tableRef,staticStyle:{width:\"100%\"},attrs:{data:t.tableData,border:!0,\"header-cell-style\":{textAlign:\"center\"},height:t.tableHeight,\"default-sort\":{prop:\"userId\",order:\"ascending\"}}},[a(\"el-table-column\",{attrs:{sortable:\"\",label:\"用户ID\",align:\"center\",prop:\"userId\",width:\"150\",\"sort-method\":t.sortUserId},scopedSlots:t._u([{key:\"default\",fn:function(t){return[a(\"userid\",{attrs:{id:t.row.userId}})]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{sortable:\"\",label:\"活动标题\",formatter:t.formatColumn,align:\"center\",prop:\"title\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{sortable:\"\",label:\"活动类型\",formatter:t.formatColumn,align:\"center\",prop:\"activityType\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{sortable:\"\",label:\"创建时间\",formatter:t.formatColumn,align:\"center\",prop:\"createTime\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{sortable:\"\",label:\"最后修改时间\",formatter:t.formatColumn,align:\"center\",prop:\"updateTime\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{sortable:\"\",label:\"活动状态\",align:\"center\",width:\"120\",prop:\"status\"},scopedSlots:t._u([{key:\"default\",fn:function(t){return[a(\"activitystatus\",{attrs:{status:t.row.status}})]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{sortable:\"\",label:\"审核状态\",align:\"center\",width:\"120\",prop:\"checkStatus\"},scopedSlots:t._u([{key:\"default\",fn:function(t){return[a(\"checkstatus\",{attrs:{status:t.row.checkStatus}})]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",align:\"center\",width:\"220\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-row\",{attrs:{type:\"flex\",justify:\"center\",align:\"middle\"}},[a(\"el-button\",{attrs:{size:\"mini\"},on:{click:function(a){return t.handleActivityDetail(e.row)}}},[t._v(\"审查详情\")]),t._v(\" \"),a(\"el-button\",{attrs:{type:\"danger\",size:\"mini\"},on:{click:function(a){return t.handleActivityRemove(e.row)}}},[t._v(\"删除活动\")])],1)]}}])})],1),t._v(\" \"),a(\"paginationtpl\",{attrs:{pagination:t.pagination,\"pagination-total\":t.paginationTotal}}),t._v(\" \"),a(\"detail\",{attrs:{\"use-data\":t.catchedData,visible:t.visibleMap.detailDiaVisible},on:{\"update:visible\":function(e){return t.$set(t.visibleMap,\"detailDiaVisible\",e)}}})],1)},r=[],s=(a(\"ac6a\"),a(\"5df3\"),a(\"96cf\"),a(\"3b8d\")),n=a(\"db72\"),l=a(\"2f62\"),o=a(\"13e7\"),c=a(\"28b9\"),u=a(\"b5cf\"),p=a(\"769a\"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"dialog-activity\"},[a(\"el-dialog\",{attrs:{title:\"活动详情\",top:\"8vh\",visible:t.show,width:\"600px\",\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){t.show=e},open:t.getUserInfo}},[a(\"div\",{staticClass:\"detail-dialog-wrap\"},[a(\"vue-scroll\",[a(\"el-form\",{ref:\"form\",attrs:{model:t.useData,\"label-width\":\"120px\"}},[a(\"el-form-item\",{attrs:{label:\"用户昵称\",prop:\"userId\"}},[a(\"span\",{domProps:{textContent:t._s(t.nickname||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动ID\",prop:\"id\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.id||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动标题\",prop:\"title\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.title||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动类型\",prop:\"activityType\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.activityType||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"审核状态\",prop:\"checkStatus\"}},[a(\"checkstatus\",{attrs:{status:t.useData.checkStatus}})],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动地址\",prop:\"address\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.city+t.useData.adname+t.useData.address||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"最大人数\",prop:\"peopleCount\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.peopleCount||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动内容\",prop:\"content\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.content||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动开始时间\",prop:\"signUpTime\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.signUpTime||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"支付方式\",prop:\"payType\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.payType||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"创建时间\",prop:\"createTime\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.createTime||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"最后更新时间\",prop:\"updateTime\"}},[a(\"span\",{domProps:{textContent:t._s(t.useData.updateTime||\"--\")}})]),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动状态\",prop:\"role\"}},[a(\"activitystatus\",{attrs:{status:t.useData.status}})],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"活动照片\",prop:\"pics\"}},[a(\"div\",{directives:[{name:\"viewer\",rawName:\"v-viewer\",value:{movable:!0},expression:\"{movable: true}\"}],staticClass:\"info-imgBox\"},t._l(t.useData.pics,(function(e,i){return a(\"el-badge\",{key:\"detail-activity-img-\"+i,staticClass:\"img-item\",attrs:{value:t.parseImageStatusText(e.status),type:t.parseImageStatusType(e.status)}},[a(\"img\",{directives:[{name:\"lazy\",rawName:\"v-lazy\",value:e.picUrl,expression:\"img.picUrl\"}]})])})),1)])],1)],1)],1)])],1)},d=[],m=a(\"7346\"),f={components:{Activitystatus:u[\"a\"],Checkstatus:p[\"a\"]},mixins:[m[\"b\"],m[\"d\"]],props:{useData:{type:Object,default:function(){return{}}}},data:function(){return{nickname:\"\"}},methods:{getUserInfo:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.useData.userId){t.next=7;break}return e={userId:this.useData.userId,page:1,pageSize:10},t.next=5,Object(o[\"v\"])(e);case 5:a=t.sent,this.nickname=a.hasOwnProperty(\"data\")&&Array.isArray(a.data)?a.data[0].nickname:\"--\";case 7:t.next=12;break;case 9:t.prev=9,t.t0=t[\"catch\"](0),console.log(t.t0);case 12:case\"end\":return t.stop()}}),t,this,[[0,9]])})));function e(){return t.apply(this,arguments)}return e}()}},v=f,b=(a(\"696d\"),a(\"2877\")),g=Object(b[\"a\"])(v,h,d,!1,null,null,null),y=g.exports,x=a(\"e33a\"),w=a(\"35a9\"),_=a(\"37b6\"),k={searchForm:{id:\"\",title:\"\",activityType:\"\",city:\"\",checkStatus:\"\"},formRules:{}},D={components:{Activitystatus:u[\"a\"],Checkstatus:p[\"a\"],Detail:y,Userid:c[\"a\"]},mixins:[x[\"a\"],m[\"a\"],w[\"a\"]],data:function(){return Object(n[\"a\"])(Object(n[\"a\"])({allActivityStatus:_[\"b\"],allActivityCheckStatus:_[\"a\"]},k),{},{visibleMap:{censorDiaVisible:!1,detailDiaVisible:!1}})},computed:{activityShow:function(){return this.$store.getters.activityShow}},watch:{activityShow:function(t){!t&&this.getData()}},methods:Object(n[\"a\"])(Object(n[\"a\"])({},Object(l[\"d\"])(\"activityInfo\",{setShow:\"SET_SHOW\",setActivityId:\"SET_ACTIVITY_ID\"})),{},{getData:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,this.loadingMap.tableLoading=!0,e=[this.getActivity(),this.getActivityCount()],t.next=5,Promise.all(e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t[\"catch\"](0),console.log(t.t0);case 10:return t.prev=10,this.loadingMap.tableLoading=!1,t.finish(10);case 13:case\"end\":return t.stop()}}),t,this,[[0,7,10,13]])})));function e(){return t.apply(this,arguments)}return e}(),getActivity:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o[\"u\"])(Object(n[\"a\"])(Object(n[\"a\"])({},this.searchForm),this.pagination));case 3:e=t.sent,this.tableData=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t[\"catch\"](0),console.log(t.t0);case 10:case\"end\":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),getActivityCount:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(o[\"h\"])(Object(n[\"a\"])({},this.searchForm));case 3:e=t.sent,this.paginationTotal=e.data,t.next=10;break;case 7:t.prev=7,t.t0=t[\"catch\"](0),console.log(t.t0);case 10:case\"end\":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),handleActivityDetail:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=e.id,a&&(this.setActivityId(a),this.setShow(!0));case 2:case\"end\":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),handleActivityRemove:function(){var t=Object(s[\"a\"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$msgbox.confirm('确定删除活动：<span class=\"bold\">'.concat(e.title,\"</span>\"),\"删除活动\",{confirmButtonText:\"删除\",cancelButtonText:\"取消\",type:\"warning\",dangerouslyUseHTMLString:!0});case 3:return a=e.id,t.next=6,Object(o[\"x\"])({activityId:a});case 6:this.$message({type:\"success\",message:\"删除成功\"}),this.getData(),t.next=13;break;case 10:t.prev=10,t.t0=t[\"catch\"](0),\"cancel\"!==t.t0&&console.log(t.t0);case 13:case\"end\":return t.stop()}}),t,this,[[0,10]])})));function e(e){return t.apply(this,arguments)}return e}()})},T=D,C=(a(\"c09b\"),Object(b[\"a\"])(T,i,r,!1,null,null,null));e[\"default\"]=C.exports},\"696d\":function(t,e,a){\"use strict\";var i=a(\"e5d8\"),r=a.n(i);r.a},\"6dba\":function(t,e,a){},c09b:function(t,e,a){\"use strict\";var i=a(\"6dba\"),r=a.n(i);r.a},e33a:function(t,e,a){\"use strict\";a(\"ac6a\"),a(\"456d\");var i=a(\"9abb\"),r={components:{Paginationtpl:i[\"a\"]},data:function(){return{pagination:{page:1,pageSize:10},paginationTotal:0}},watch:{pagination:{handler:function(){this.getData()},deep:!0}},methods:{resetPagination:function(){this.pagination={page:1,pageSize:10}}}};e[\"a\"]={mixins:[r],data:function(){return{tableRef:\"mainTable\",tableData:[],catchedDataArr:[],catchedData:{},catchedRadio:null,tableSelected:!1,tableHeight:200,extraHeight:110,loadingMap:{tableLoading:!0}}},computed:{isTableRadioSelected:function(){return Object.keys(this.catchedData).length},isTableCheckBoxSelected:function(){return this.catchedDataArr.length>0}},methods:{handleTableCheckBoxSelect:function(t){this.catchedDataArr=t,this.tableSelected=this.$refs[this.tableRef].selection.length>0},handleTabelRadioClick:function(t){this.catchedRadio=t,this.catchedData=this.tableData[t]},handleTableItemClick:function(t){this.catchedData=t},setTableHeightBySelf:function(){var t=this.$refs[this.searchRef],e=t&&t.$el.clientHeight||0;this.tableHeight=this.$el.clientHeight-this.extraHeight-e},setTableHeightByParent:function(){var t=this.$refs[this.searchRef],e=t&&t.$el.clientHeight||0;this.tableHeight=this.$parent.$el.clientHeight-this.extraHeight-e},watchResizeFinish:function(t,e){return e&&clearTimeout(e),e=setTimeout((function(){return new Promise((function(e){return e(t())}))}),300),e},addTabelHeightListener:function(){var t,e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"self\",i=\"self\"===a?this.$el:this.$parent.$el,r=\"self\"===a?this.setTableHeightBySelf:this.setTableHeightByParent;this.$erd.listenTo(i,(function(a){t=e.watchResizeFinish(r,t)}))},isTableSelected:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"请先选择需要修改的数据\";return!(!this.isTableRadioSelected&&!this.isTableCheckBoxSelected)||(this.$message({type:\"warning\",message:t}),!1)},formatColumn:function(t,e,a,i){return null===a||\"\"===a||void 0===a?\"--\":a}},beforeDestroy:function(){this.$erd.removeAllListeners(this.$el)}}},e5d8:function(t,e,a){}}]);","extractedComments":[]}