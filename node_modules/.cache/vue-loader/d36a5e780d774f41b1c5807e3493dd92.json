{"remainingRequest":"/Users/zhaoguanglin/corgi-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoguanglin/corgi-admin/src/views/shopMgr/hotmanager/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhaoguanglin/corgi-admin/src/views/shopMgr/hotmanager/index.vue","mtime":1599746701454},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { list_hot_activity,delete_hot_activity, update_hot_activity,get_detail} from '@/api/shopMgr'\r\nimport Censorshipstatus from '@/components/Censorshipstatus'\r\nimport Userid from '@/components/Userid'\r\nimport tableCommon from '@/mixins/tableCommon'\r\nimport Detail from './Detail'\r\nimport contentMgrCommon from '../mixins/common'\r\nimport { allCensorshipTypes } from '@/utils/const'\r\nimport { parseImageStatus, emit } from '@/mixins/commonSet'\r\nimport pageConfig from './pageConfig'\r\nexport default {\r\n  components: { Censorshipstatus,Detail,Userid },\r\n  mixins: [tableCommon, contentMgrCommon,emit],\r\n\r\n  data() {\r\n    return {\r\n      allCensorshipTypes,\r\n      chartRadio:\"推荐页banner\",\r\n      visibleMap: {\r\n        censorDiaVisible: false,\r\n        detailDiaVisible: false,\r\n        statusDialogVisible: false\r\n      },\r\n      ...pageConfig\r\n    }\r\n  },\r\n  methods: {\r\n    async getData() {\r\n      try {\r\n\r\n        const data = await list_hot_activity({})\r\n                console.log(data)\r\n\r\n        this.tableData = data.data.map(item => {\r\n\r\n\r\n\r\n          item.state = item.status == 0? '禁用':'启用'\r\n          if(item.city=='全国')\r\n          {\r\n                                  item.radio = '全国';\r\n          }\r\n          else{\r\n                                              item.radio = '活动当地';\r\n          }\r\n\r\n\r\n\r\n    //  let userId = 0\r\n    //         let activityId = item.activityId;\r\n    //       const data1 = get_detail({userId,activityId});\r\n    //                       console.log(data1)\r\n          item.area = '热门活动'\r\n          return item\r\n        })\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n    async checkPicPass(enable,scope) {\r\n      \r\n         let id = scope.id\r\n            let barId = scope.barId\r\n      let activityId = scope.activityId\r\n            let activityName = scope.activityName\r\n      let startTime =  scope.startTime;\r\n      let endTime =  scope.endTime;\r\n      let order =  scope.order;\r\n      let type = 'recommend';\r\n      let city = scope.city;\r\n      let status = enable ? '1': '0'\r\n\r\n    \r\n      let data = ({ id:id,barId: barId, activityId: activityId,activityName: activityName, startTime: startTime, endTime: endTime, order: order, status: status, type: type,city: city});\r\n      update_hot_activity(data);      console.log(data)\r\n      this.getData();\r\n            this.getData();\r\n    },\r\n\r\n    async updateOrder(enable,scope) {\r\n      \r\n\r\n      let id = scope.id\r\n            let barId = scope.barId\r\n      let activityId = scope.activityId\r\n      let startTime =  scope.startTime;\r\n      let activityName = scope.activityName\r\n      let endTime =  scope.endTime;\r\n      let order =  scope.order;\r\n      let status =  scope.status;\r\n      let type = 'recommend';\r\n      let city = scope.city;\r\n      if(enable)\r\n      {\r\n        let num = parseInt(order);\r\n        num++;\r\n        order = (num).toString();\r\n      }\r\n      else\r\n      {\r\n        if(order=='1')\r\n        {\r\n          return;\r\n        }\r\n        let num = parseInt(order);\r\n        num--;\r\n        order = (num).toString();\r\n              }\r\n      let data = ({ id:id,activityName:activityName,barId: barId, activityId: activityId, startTime: startTime, endTime: endTime, order: order, status: status, type: type,city: city});\r\n      console.log(data)\r\n      update_hot_activity(data);\r\n      this.getData();\r\n            this.getData();\r\n\r\n    },\r\n   handleRadioChange(value) {\r\n     this.getData();\r\n    },\r\n\r\n    async handleAddMember(data) {\r\n      this.catchedData = data\r\n            this.visibleMap.detailDiaVisible = true\r\n\r\n    },\r\n    async checkPicRefuse(scope) {\r\n      try {\r\n        await this.$msgbox.confirm('确定删除吗', '提醒', {\r\n          confirmButtonText: '删除',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          dangerouslyUseHTMLString: true\r\n        })\r\n        let hotId = scope.id;\r\n\r\n        await delete_hot_activity({ hotId })\r\n        this.$message({ type: 'success', message: '操作成功' })\r\n        this.getData()\r\n              this.getData();\r\n\r\n      } catch (err) {\r\n        err !== 'cancel' && console.log(err)\r\n      }\r\n    }\r\n  }\r\n}\r\n",null]}