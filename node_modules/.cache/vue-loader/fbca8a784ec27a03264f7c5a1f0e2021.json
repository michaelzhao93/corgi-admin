{"remainingRequest":"/Users/zhaoguanglin/corgi-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoguanglin/corgi-admin/src/views/shopMgr/active/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhaoguanglin/corgi-admin/src/views/shopMgr/active/index.vue","mtime":1599199662393},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport { get_bar_activity,delete_activity,recommend_activity,unrecommend_activity} from '@/api/shopMgr'\r\nimport Censorshipstatus from '@/components/Censorshipstatus'\r\nimport Userid from '@/components/Userid'\r\nimport Detail from './Detail'\r\nimport StatusDialog from './StatusDialog'\r\nimport tableCommon from '@/mixins/tableCommon'\r\nimport contentMgrCommon from '../mixins/common'\r\nimport { parseImageStatus, emit } from '@/mixins/commonSet'\r\nimport { allCensorshipTypes } from '@/utils/const'\r\nimport pageConfig from './pageConfig'\r\nexport default {\r\n  components: { Censorshipstatus,StatusDialog, Detail,Userid },\r\n  mixins: [tableCommon, contentMgrCommon,emit],\r\n  data() {\r\n    return {\r\n      allCensorshipTypes,\r\n      InbarId: '', \r\n      visibleMap: {\r\n        censorDiaVisible: false,\r\n        detailDiaVisible: false,\r\n        statusDialogVisible: false\r\n      },\r\n      ...pageConfig\r\n    }\r\n  },\r\n  methods: {\r\n    async getData() {\r\n    },\r\n    async get_bar_activity() {\r\n      try {\r\n        let barId = this.InbarId;\r\n        let page = 1;\r\n        let pageSize = 100;\r\n\r\n        const data = await get_bar_activity({barId,page,pageSize})\r\n                console.log(data)\r\n\r\n        this.tableData = data.data.map(item => {\r\n          //item.ctime = item.ctime.slice(0, -2)\r\n            item.state = item.status == \"deleted\"? '禁用':'启用'\r\n          return item\r\n        })\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n    async checkPicPass(scope) {\r\n      try {\r\n        const { dataId } = scope.row\r\n        const type = this.censorType\r\n        const userId = -1\r\n        await passPic({ dataId, type, userId })\r\n        this.$message({ type: 'success', message: '操作成功' })\r\n        this.getData()\r\n      } catch (err) {\r\n        console.log(err)\r\n      }\r\n    },\r\n\r\n    async handleAddMember(data) {\r\n                      console.log(data)\r\n      if(data == undefined || data.length <= 0)\r\n      {\r\n        let barId = this.InbarId;\r\n        let newdata = ({userId: barId});\r\n        data = newdata;\r\n                console.log(data)\r\n      }\r\n      this.catchedData = data\r\n      this.visibleMap.detailDiaVisible = true\r\n    },\r\n   async recommonActive(data,state) {\r\n                      console.log(data)\r\n      if(data == undefined || data.length <= 0)\r\n      {\r\n        let barId = this.InbarId;\r\n        let newdata = ({userId: barId});\r\n        data = newdata;\r\n                console.log(data)\r\n      }\r\n              let activityId = data.id\r\n      if(state==1)\r\n      {\r\n        await recommend_activity({ 'activityId':activityId})\r\n      }\r\n      else if(state==0)\r\n      {\r\n        await unrecommend_activity({ 'activityId':activityId})\r\n      }\r\n        this.$message({ type: 'success', message: '操作成功' })\r\n        this.get_bar_activity()\r\n    },\r\n      \r\n      \r\n      async addHot(data) \r\n      {\r\n      this.catchedData = data\r\n      this.visibleMap.statusDialogVisible = true\r\n    },\r\n    async checkPicRefuse(scope) {\r\n      try {\r\n        await this.$msgbox.confirm('确定删除吗', '提醒', {\r\n          confirmButtonText: '删除',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          dangerouslyUseHTMLString: true\r\n        })\r\n        let activityId = scope.row.id\r\n        await delete_activity({ 'activityId':activityId})\r\n        this.$message({ type: 'success', message: '操作成功' })\r\n        this.get_bar_activity()\r\n      } catch (err) {\r\n        err !== 'cancel' && console.log(err)\r\n      }\r\n    }\r\n  }\r\n}\r\n",null]}