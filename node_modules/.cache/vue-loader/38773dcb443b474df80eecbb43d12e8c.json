{"remainingRequest":"/Users/zhaoguanglin/corgi-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoguanglin/corgi-admin/src/views/contentMgr/user/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/zhaoguanglin/corgi-admin/src/views/contentMgr/user/index.vue","mtime":1589958114000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoguanglin/corgi-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { mapMutations } from 'vuex'\nimport { queryUser, countUser, deleteUser } from '@/api/contentMgr'\nimport Checkstatus from '@/components/Checkstatus'\nimport tableCommon from '@/mixins/tableCommon'\nimport { emit } from '@/mixins/commonSet'\nimport contentMgrCommon from '../mixins/common'\nimport { allCheckStatus } from '@/utils/const'\nimport pageConfig from './pageConfig'\nexport default {\n  components: { Checkstatus },\n  mixins: [tableCommon, emit, contentMgrCommon],\n  data() {\n    return {\n      ...pageConfig,\n      allCheckStatus,\n      visibleMap: {\n        censorDiaVisible: false\n      }\n    }\n  },\n  computed: {\n    userShow() {\n      return this.$store.getters.userShow\n    }\n  },\n  watch: {\n    userShow(value) {\n      !value && this.getData()\n    }\n  },\n  methods: {\n    ...mapMutations('userInfo', {\n      'setShow': 'SET_SHOW',\n      'setUserId': 'SET_USER_ID'\n    }),\n    async getData() {\n      try {\n        this.loadingMap.tableLoading = true\n        const task = [this.getUser(), this.getUserCount()]\n        await Promise.all(task)\n      } catch (err) {\n        console.log(err)\n      } finally {\n        this.loadingMap.tableLoading = false\n      }\n    },\n    async getUser() {\n      try {\n        const data = await queryUser({ ...this.searchForm, ...this.pagination })\n        this.tableData = data.data.map(item => {\n          if (typeof item.createTime === 'string') {\n            item.createTime = item.createTime.slice(0, -2)\n          }\n          return item\n        })\n      } catch (err) {\n        console.log(err)\n      }\n    },\n    async getUserCount() {\n      try {\n        const data = await countUser({ ...this.searchForm })\n        this.paginationTotal = data.data\n      } catch (err) {\n        console.log(err)\n      }\n    },\n    async handleUserDetail(data) {\n      const { userId } = data\n      if (userId) {\n        this.setUserId(userId)\n        this.setShow(true)\n      }\n    },\n    async handleDeleteUser(data) {\n      try {\n        await this.$msgbox.confirm(`确定删除用户ID：<span class=\"bold\">${data.userId}</span>`, '删除用户', {\n          confirmButtonText: '删除',\n          cancelButtonText: '取消',\n          type: 'warning',\n          dangerouslyUseHTMLString: true\n        })\n        const { userId } = data\n        await deleteUser({ userId })\n        this.$message({ type: 'success', message: '删除成功' })\n        this.getData()\n      } catch (err) {\n        err !== 'cancel' && console.log(err)\n      }\n    }\n  }\n}\n",null]}